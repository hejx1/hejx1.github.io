<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Junxin&#39;s Blog</title>
  
  <subtitle>A good memory is not as good as a rotten keyboard.</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://blog.smilexin.cn/"/>
  <updated>2022-07-29T03:25:42.909Z</updated>
  <id>https://blog.smilexin.cn/</id>
  
  <author>
    <name>何俊鑫</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Nexus私库中releases和snapshots库的区别</title>
    <link href="https://blog.smilexin.cn/2022/07/29/Nexus%E7%A7%81%E5%BA%93%E4%B8%ADreleases%E5%92%8Csnapshots%E5%BA%93%E7%9A%84%E5%8C%BA%E5%88%AB.html"/>
    <id>https://blog.smilexin.cn/2022/07/29/Nexus私库中releases和snapshots库的区别.html</id>
    <published>2022-07-28T16:00:00.000Z</published>
    <updated>2022-07-29T03:25:42.909Z</updated>
    
    <content type="html"><![CDATA[<p>想要弄明白这个问题,我们就要先明白这两种库在实际使用中的不同之处:</p><p><strong>snapshot</strong>版本可以在同一个版本号下迭代,nexus会根据上传的时间区分出不同的版本,在maven引用时,如果使用的是snapshot版本,重新导入maven的时候,会去私库拉取最新上传的代码.</p><p><strong>release</strong>版本每个版本号只能上传一次, 也就是说1.0,2.0这样的版本只能有一个,也就是说当前版本号下, 不能可能出现不同的代码.</p><p>接下来, 我们试想这么一个场景, 公司在开发一个新系统,版本定义为1.0. 系统中用到了一个工具, 所以, 项目组分配A同事来开发这个工具, 其他组员引入这个工具包就可以了, 当A同事开发了部分功能之后, 其他同事就可以引入使用了, 当然, A同事还在继续开发工具包中的其他功能. 每开发出一部分功能,其他同事就要去使用, 这样的场景下, A同事应该每完成一个功能就提交一次代码到库中,我们也能明白, 这个时候, 其实工具包的1.0版本其实还没有真正完成, 所属版本号依然是1.0, 基于两个库不同的特性, 我们只能将代码提交到snapshots版本库中.</p><p>上面描述的开发过程, 当主体项目上线时, A同事还在继续优化工具包,那么, 我们的线上项目是不是应该每次重启都要引用A同事刚刚开发还没有经过完全测试的最新版本?</p><p>大家其实都能想明白, 当然不能, 这样做实在是太危险了. 所以, 也就是说,线上项目在一段时间内都只能使用某个经过了完善测试的版本. 不能因为开发者的更新提交而引用未经完善测试的新版本. 这样relases库的作用就体现出来了. 这个库中只要版本号不变, 永远只有一个jar包.</p><p>当我们安装好nexus之后, 原生就有这两个库, 看名字就能知道哪是是哪个, 其实, 本质上, 任何host类型的本地库都可以作为release和snapshot库, 跟名字没有任何关系,是设置决定的, 我们打nexus的库的设置会发现一个Hosted设置选项, 选项中有三个值 :</p><p><strong>Allow redeploy</strong> : 允许同一个版本号下重复提交代码, nexus以时间区分</p><p><strong>Disable redeploy</strong> : 不允许同一个版本号下重复提交代码</p><p><strong>Read-Only</strong> : 不允许提交任何版本</p><p>原生的maven-releases库是Disable redeploy设置, maven-snapshots是Allow redeploy.</p><p>我们其实可以在项目的pom文件中设置具体的relaeses库和snapshots库, 然后如果当前项目的版本号的后缀名中带着-SNAPSHOT,就会将项目提交到snapshots库中,其他的会提交releases库中.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;distributionManagement&gt;</span><br><span class="line">    &lt;!--releases库, id 是全局配置文件中的server名称, 配置用户名密码--&gt;</span><br><span class="line">    &lt;repository&gt;</span><br><span class="line">        &lt;id&gt;nexus&lt;/id&gt;</span><br><span class="line">        &lt;url&gt;http://ip:8081/repository/maven-releases/&lt;/url&gt;</span><br><span class="line">    &lt;/repository&gt;</span><br><span class="line">    &lt;!--snapshots库, id 是全局配置文件中的server的名称, 配置用户名密码--&gt;</span><br><span class="line">    &lt;snapshotRepository&gt;</span><br><span class="line">        &lt;id&gt;nexus&lt;/id&gt;</span><br><span class="line">        &lt;url&gt;http://ip:8081/repository/maven-snapshots/&lt;/url&gt;</span><br><span class="line">    &lt;/snapshotRepository&gt;</span><br><span class="line">&lt;/distributionManagement&gt;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;想要弄明白这个问题,我们就要先明白这两种库在实际使用中的不同之处:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;snapshot&lt;/strong&gt;版本可以在同一个版本号下迭代,nexus会根据上传的时间区分出不同的版本,在maven引用时,如果使用的是snapshot版本,重新导入mav
      
    
    </summary>
    
    
      <category term="Nexus" scheme="https://blog.smilexin.cn/tags/Nexus/"/>
    
      <category term="maven" scheme="https://blog.smilexin.cn/tags/maven/"/>
    
  </entry>
  
  <entry>
    <title>SpringJPA的delete踩坑记录</title>
    <link href="https://blog.smilexin.cn/2022/07/29/SpringJPA%E7%9A%84delete%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95.html"/>
    <id>https://blog.smilexin.cn/2022/07/29/SpringJPA的delete踩坑记录.html</id>
    <published>2022-07-28T16:00:00.000Z</published>
    <updated>2022-07-29T02:23:26.502Z</updated>
    
    <content type="html"><![CDATA[<h1 id="JPA版本"><a href="#JPA版本" class="headerlink" title="JPA版本"></a>JPA版本</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;</span><br><span class="line">&lt;version&gt;2.7.2&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><h1 id="需求"><a href="#需求" class="headerlink" title="需求"></a>需求</h1><p>根据<code>staffId</code>删除一条数据后、再新增一条数据，并且数据库中<code>staffId</code>是有唯一性约束的。<br>表结构如下：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`work_record`</span></span><br><span class="line">(</span><br><span class="line">    <span class="string">`id`</span>       <span class="built_in">bigint</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'主键id'</span>,</span><br><span class="line">    <span class="string">`name`</span>  <span class="built_in">varchar</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'员工名称'</span>,</span><br><span class="line">    <span class="string">`staff_id`</span>  <span class="built_in">varchar</span>(<span class="number">30</span>) <span class="keyword">DEFAULT</span> <span class="string">''</span> <span class="keyword">COMMENT</span> <span class="string">'人员id'</span>,</span><br><span class="line">    PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>) <span class="keyword">USING</span> BTREE,</span><br><span class="line">    <span class="keyword">UNIQUE</span> <span class="keyword">KEY</span> <span class="string">`uk_staff_id`</span> (<span class="string">`staff_id`</span>) <span class="keyword">USING</span> BTREE</span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8mb4 <span class="keyword">COMMENT</span>=<span class="string">'工作记录表'</span>;</span><br></pre></td></tr></table></figure><h1 id="代码描述"><a href="#代码描述" class="headerlink" title="代码描述"></a>代码描述</h1><p>我这边应用层先使用<code>CrudRepository.delete(T t)</code>进行数据的删除，再进行的录入新数据。会出现<strong>唯一索引重复的异常</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">@Transactional(rollbackFor = RuntimeException.class)</span><br><span class="line">public void startWork(String name, String staffId) &#123;</span><br><span class="line">WorkRecordEntity byStaffId = workRecordRepo.findByStaffId(staffId);</span><br><span class="line">if (byStaffId != null) &#123;</span><br><span class="line">workRecordRepo.delete(byStaffId);</span><br><span class="line">&#125;</span><br><span class="line">WorkRecordEntity save = new WorkRecordEntity();</span><br><span class="line">save.setName(name);</span><br><span class="line">save.setStaffId(staffId);</span><br><span class="line">workRecordRepo.save(save);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>通过查看执行SQL可以发现，并未执行删除操作，就执行了插入操作，所以出现<code>staffId</code>重复的情况。</p><p>查询资料了解到：<strong>jpa是在整个事务完了之后再执行delete语句的。 </strong></p><h1 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h1><ol><li>调用<code>flush()</code>方法</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">workRecordRepo.delete(byStaffId);</span><br><span class="line">workRecordRepo.flush();</span><br></pre></td></tr></table></figure><ol start="2"><li>在Repository层使用jpql语句</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Modifying</span></span><br><span class="line"><span class="meta">@Query</span>(value = <span class="string">"delete from WorkRecord s where s.staffId = :staffId"</span>)</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">deleteByStaffId</span><span class="params">(@Param String staffId)</span></span>;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;JPA版本&quot;&gt;&lt;a href=&quot;#JPA版本&quot; class=&quot;headerlink&quot; title=&quot;JPA版本&quot;&gt;&lt;/a&gt;JPA版本&lt;/h1&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;
      
    
    </summary>
    
    
      <category term="SpringJPA" scheme="https://blog.smilexin.cn/tags/SpringJPA/"/>
    
  </entry>
  
  <entry>
    <title>达梦数据库笔记</title>
    <link href="https://blog.smilexin.cn/2022/07/26/%E8%BE%BE%E6%A2%A6%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AC%94%E8%AE%B0.html"/>
    <id>https://blog.smilexin.cn/2022/07/26/达梦数据库笔记.html</id>
    <published>2022-07-25T16:00:00.000Z</published>
    <updated>2022-07-28T07:01:10.026Z</updated>
    
    <content type="html"><![CDATA[<h1 id="查询SQL"><a href="#查询SQL" class="headerlink" title="查询SQL"></a>查询SQL</h1><p>每个用户有一个默认的同名的模式，访问自己模式下的表、视图等，不需要加模式名，访问其他模式下的对象需要加上模式名。</p><p>查询当前用户模式下的表，无需加模式名。查询其他模式下的表需要加上模式名。<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查询自己模式下的表</span></span><br><span class="line">SQL&gt; SELECT * FROM books;</span><br><span class="line"><span class="comment">-- 查询PERSON模式下的person表</span></span><br><span class="line">SQL&gt; select * from PERSON.person;</span><br></pre></td></tr></table></figure></p><h1 id="获取数据表中的字段名、类型、长度"><a href="#获取数据表中的字段名、类型、长度" class="headerlink" title="获取数据表中的字段名、类型、长度"></a>获取数据表中的字段名、类型、长度</h1><p>DM数据库提供兼容大部分Oracle功能的系统数据字典，包含DBA_TABLES、DBA_TAB_COLUMNS、DBA_VIEWS、DBA_SOURCE等数据字典，方便用户查询表结构、视图、对象定义等相关信息。<br>①查询表/视图字段信息<br>USER_TAB_COLUMNS/ALL_TAB_COLUMNS/DBA_TAB_COLUMNS<br>DBA_TAB_COLUMNS显示数据库中所有表、视图或聚簇的列。表字段定义略。<br>ALL_TAB_COLUMNS显示当前用户能够访问的表、视图或聚簇的列。表结构同DBA_TAB_COLUMNS。<br>USER_TAB_COLUMNS显示当前用户所拥有的表、视图或聚簇的列。</p><p>如使用DMHR用户查询其当前用户下EMPLOYEE表结构，查询SQL如参考如下:<br>select t.column_name, t.data_type, t.data_length, t.nullablefrom user_tab_columns t where table_name=’EMPLOYEE’;</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 获取数据表中的字段名、类型、长度</span></span><br><span class="line">SQL&gt; select COLUMN_NAME,DATA_TYPE,DATA_LENGTH,COLUMN_ID,TABLE_NAME,OWNER from ALL_TAB_COLUMNS WHERE OWNER='OTHER' AND TABLE_NAME='ACCOUNT';</span><br></pre></td></tr></table></figure><h1 id="达梦常用数据类型汇总"><a href="#达梦常用数据类型汇总" class="headerlink" title="达梦常用数据类型汇总"></a>达梦常用数据类型汇总</h1><p>精确数值数据类型包括：NUMERIC、DECIMAL、DEC 类型、NUMBER 类型、INTEGER 类型、INT 类型、BIGINT 类型、TINYINT 类型、BYTE 类型、SMALLINT 类型。<br>近似数值类型包括：FLOAT 类型、DOUBLE 类型、REAL 类型、DOUBLE PRECISION 类型。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">1.NUMERIC[精度，标度]:用于存储零、正负定点数。精度范围1至38</span><br><span class="line">2.NUMBER类型：跟NUMERIC相同</span><br><span class="line">3.DECIMAL/DEC类型：跟NUMERIC相似</span><br><span class="line">4.INTEGER/INT类型：用于存储有符号整数，精度为10</span><br><span class="line">5.BIGINT类型：用于存储有符号整数，精度为19，标度为0</span><br><span class="line">6.TINYINT类型：用于存储有符号整数，精度为3，标度为0。取值范围为：-128~+127。</span><br><span class="line">7.BYTE类型：与TINYINT相似，精度为3，标度为0。</span><br><span class="line">8.SMALLINT类型：用于存储有符号整数，精度为5，标度为0。</span><br><span class="line">9.BINARY类型：指定定长二进制数据。</span><br><span class="line">10.REAL类型：带二进制的浮点数。</span><br><span class="line">11.FLOAT类型：二进制精度的浮点数，精度最大不超过53。</span><br><span class="line">12.DOUBLE类型：同FLOAT相似，精度最大不超过53。</span><br><span class="line">13.DOUBLE PRECISION类型：该类型指明双精度浮点数，其二进制精度为53，十进制精度为15。</span><br><span class="line"> </span><br><span class="line">使用语法：NUMERIC[(精度 [, 标度])]，DECIMAL、DEC 类型、NUMBER 类型与 NUMERIC 的语法一致。</span><br><span class="line">NUMERIC(4,1) 定义了小数点前面 3 位和小数点后面 1 位，共 4 位的数字，范围在 -999.9 到 999.9。所有 NUMERIC 数据类型，如果其值超过精度，会返回一个出错信息，如果超过标度，则多余的位会被截断。</span><br></pre></td></tr></table></figure><h1 id="添加唯一索引"><a href="#添加唯一索引" class="headerlink" title="添加唯一索引"></a>添加唯一索引</h1><p>索引可以是唯一的或非唯一的，唯一索引可以保证表上不会有两行数据在键列上具有相同的值，非唯一索引不会在键列上施加这个限制。使用<code>CREATE UNIQUE INDEX</code>语句来创建唯一索引</p><ul><li>索引名称：uk_idx_staff_id</li><li>索引类型：UNIQUE</li><li>操作表：”RONGCLOUD”.”WORK_RECORD”</li><li>索引字段：staff_id</li><li>表空间：RONGCLOUD<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; CREATE UNIQUE INDEX uk_idx_staff_id ON "RONGCLOUD"."WORK_RECORD" (staff_id) storage (on RONGCLOUD);</span><br></pre></td></tr></table></figure></li></ul><h1 id="删除索引"><a href="#删除索引" class="headerlink" title="删除索引"></a>删除索引</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-- 表空间.索引名称</span><br><span class="line">DROP INDEX RONGCLOUD.uk_idx_staff_id;</span><br></pre></td></tr></table></figure><h1 id="表字段设置注释信息"><a href="#表字段设置注释信息" class="headerlink" title="表字段设置注释信息"></a>表字段设置注释信息</h1><p>用户可以对于自己拥有的模式下的对象创建注释，可以针对整张表或视图做注释，也可以对于各列进行注释。<br>在DM中添加注释可以用注释语句：<code>COMMENT ON &lt;对象名称&gt; IS &lt;注释字符串&gt;</code></p><ul><li><p>为 RONGCLOUD 模式下的 WORK_RECORD 表的 STAFF_NAME 字段添加注释信息</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 为 RONGCLOUD 模式下的 WORK_RECORD 表的 STAFF_NAME 字段添加注释信息</span></span><br><span class="line">SQL&gt; COMMENT ON COLUMN "RONGCLOUD"."WORK_RECORD"."STAFF_NAME" IS '员工名称';</span><br></pre></td></tr></table></figure></li><li><p>为表添加注释信息</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; COMMENT ON TABLE RONGCLOUD.RY_USER IS '这是表注释';</span><br></pre></td></tr></table></figure></li></ul><h1 id="更新字段类型"><a href="#更新字段类型" class="headerlink" title="更新字段类型"></a>更新字段类型</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-- 设置RY_USER表的PHONE字段为varchar(11)</span><br><span class="line">alter table RONGCLOUD.RY_USER modify(PHONE varchar(11) )</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;查询SQL&quot;&gt;&lt;a href=&quot;#查询SQL&quot; class=&quot;headerlink&quot; title=&quot;查询SQL&quot;&gt;&lt;/a&gt;查询SQL&lt;/h1&gt;&lt;p&gt;每个用户有一个默认的同名的模式，访问自己模式下的表、视图等，不需要加模式名，访问其他模式下的对象需要加上模式名。&lt;/
      
    
    </summary>
    
    
      <category term="数据库" scheme="https://blog.smilexin.cn/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
      <category term="达梦数据库" scheme="https://blog.smilexin.cn/tags/%E8%BE%BE%E6%A2%A6%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
      <category term="国产数据库" scheme="https://blog.smilexin.cn/tags/%E5%9B%BD%E4%BA%A7%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
  </entry>
  
  <entry>
    <title>健身记录_202207</title>
    <link href="https://blog.smilexin.cn/2022/07/01/%E5%81%A5%E8%BA%AB%E8%AE%B0%E5%BD%95_202207.html"/>
    <id>https://blog.smilexin.cn/2022/07/01/健身记录_202207.html</id>
    <published>2022-06-30T16:00:00.000Z</published>
    <updated>2022-07-29T07:42:14.437Z</updated>
    
    <content type="html"><![CDATA[<h1 id="2022-07-01-星期五（xjbl）"><a href="#2022-07-01-星期五（xjbl）" class="headerlink" title="2022-07-01 星期五（xjbl）"></a>2022-07-01 星期五（xjbl）</h1><ul><li>椭圆机10分钟</li><li>重锤高位下拉<ul><li>25kg 12</li><li>40kg 12</li><li>45kg 12 12 10</li></ul></li><li>单臂哑铃划船18kg 10</li><li>椭圆机25分钟</li></ul><h1 id="2022-07-06-星期三（胸）"><a href="#2022-07-06-星期三（胸）" class="headerlink" title="2022-07-06 星期三（胸）"></a>2022-07-06 星期三（胸）</h1><ul><li>单臂哑铃划船16kg 12</li><li>平板杠铃卧推<ul><li>20kg 20</li><li>40kg 12</li><li>45kg 9 9 10 10</li></ul></li><li>哑铃上斜卧推18kg 9 10 10 10</li><li>双杠臂屈伸32kg 10 10 10 10</li></ul><h1 id="2022-07-07-星期四（背）"><a href="#2022-07-07-星期四（背）" class="headerlink" title="2022-07-07 星期四（背）"></a>2022-07-07 星期四（背）</h1><ul><li>高位下拉27kg 12</li><li>引体向上 6 6 6 6</li><li>俯身哑铃划船<ul><li>12kg 10</li><li>20kg 8</li><li>24kg 8</li><li>26kg 9 10 10 8</li></ul></li><li>V把坐姿划船45kg 12 12 12 12</li></ul><h1 id="2022-07-11-星期一（胸）"><a href="#2022-07-11-星期一（胸）" class="headerlink" title="2022-07-11 星期一（胸）"></a>2022-07-11 星期一（胸）</h1><ul><li>单臂哑铃俯身划船16kg 12</li><li>平板杠铃卧推<ul><li>20kg 20</li><li>40kg 12</li><li>50kg 8 8 8 6</li></ul></li><li>哑铃上斜卧推20kg 8 9 8 9</li><li>双杠臂屈伸32kg 10 10 8 8 8</li></ul><h1 id="2022-07-12-星期二（背）"><a href="#2022-07-12-星期二（背）" class="headerlink" title="2022-07-12 星期二（背）"></a>2022-07-12 星期二（背）</h1><ul><li>引体向上 8 8 6 6 5</li><li>俯身单臂哑铃划船<ul><li>14kg 12</li><li>18kg 10</li><li>24kg 8 12 9 9</li></ul></li><li>坐姿绳索v把划船45kg 8 8 9 8</li><li>V把高位下拉39kg 6 6 6 6</li></ul><h1 id="2022-07-13-星期三（手臂）"><a href="#2022-07-13-星期三（手臂）" class="headerlink" title="2022-07-13 星期三（手臂）"></a>2022-07-13 星期三（手臂）</h1><ul><li>平板窄距卧推<ul><li>20kg 13</li><li>40kg 10</li><li>45kg 8</li><li>50kg 8 8 9 6</li></ul></li><li>双杠臂屈伸 12 12 10 10</li><li>单臂哑铃交替弯举锤式8kg 12</li><li>坐姿单臂哑铃弯举8kg 12 12 12</li><li>牧师凳窄距二头弯举<ul><li>15kg 10 12</li><li>20kg 8 8 8</li></ul></li></ul><h1 id="2022-07-14-星期四（腿）"><a href="#2022-07-14-星期四（腿）" class="headerlink" title="2022-07-14 星期四（腿）"></a>2022-07-14 星期四（腿）</h1><ul><li>罗马尼亚硬拉<ul><li>40kg 12 12</li><li>50kg 9 9 8</li></ul></li><li>传统硬拉70kg 3 5 6 3 5</li><li>器械坐姿腿举<ul><li>33kg 12</li><li>50kg 12</li><li>73kg 12 13 12 12</li></ul></li></ul><h1 id="2022-07-15-星期五（肩）"><a href="#2022-07-15-星期五（肩）" class="headerlink" title="2022-07-15 星期五（肩）"></a>2022-07-15 星期五（肩）</h1><ul><li>实力推<ul><li>20kg 12</li><li>25kg 8</li><li>30kg 8 8 8 6</li></ul></li><li>坐姿哑铃推举18kg 6 8 9 7</li><li>哑铃侧平举10kg 10 8 10 10</li><li>高位下拉练后束39kg 12 12 10 8</li></ul><h1 id="2022-07-16-星期六（手臂）"><a href="#2022-07-16-星期六（手臂）" class="headerlink" title="2022-07-16 星期六（手臂）"></a>2022-07-16 星期六（手臂）</h1><ul><li>平板窄距卧推20kg 10 12</li><li>仰卧直杆臂屈伸<ul><li>10kg 10</li><li>20kg 12 12 13 15</li></ul></li><li>颈后哑铃臂屈伸<ul><li>14kg 12</li><li>16kg 13</li><li>20kg 12</li><li>22kg 12 12 12</li></ul></li><li>直杆二头弯举20kg 10</li><li>曲杆二头弯举20kg 10 10 10 10</li><li>单臂哑铃弯举<ul><li>8kg 8 8</li><li>6kg 8</li></ul></li><li>曲杆二头弯举15kg 15 12 13 13</li><li>坡度快走21分钟</li></ul><h1 id="2022-07-18-星期一（胸）"><a href="#2022-07-18-星期一（胸）" class="headerlink" title="2022-07-18 星期一（胸）"></a>2022-07-18 星期一（胸）</h1><ul><li>平板杠铃卧推20kg 12</li><li>单臂哑铃划船18kg 12</li><li>平板杠铃卧推<ul><li>40kg 12</li><li>50kg 8 7 8 5</li></ul></li><li>平板哑铃卧推18kg 8</li><li>哑铃上斜卧推<ul><li>18kg 8</li><li>20kg 8 6 7 8</li></ul></li><li>双杠臂屈伸32kg 8 8 9 8</li><li>固定器械推下胸45kg 8 8 7 6</li></ul><h1 id="2022-07-19-星期二（背）"><a href="#2022-07-19-星期二（背）" class="headerlink" title="2022-07-19 星期二（背）"></a>2022-07-19 星期二（背）</h1><ul><li>引体向上 8 8 6 6<ul><li>36kg↑ 6 7</li></ul></li><li>俯身单臂哑铃划船<ul><li>16kg 12</li><li>20kg 10</li><li>26kg 10 10 12 10</li></ul></li><li>坐姿绳索v把划船45kg 10 8 8 9</li><li>曲杆杠铃二头弯举15kg 12 12 12</li></ul><h1 id="2022-07-20-星期三（腿）"><a href="#2022-07-20-星期三（腿）" class="headerlink" title="2022-07-20 星期三（腿）"></a>2022-07-20 星期三（腿）</h1><ul><li>杠铃深蹲<ul><li>20kg 12</li><li>40kg 12</li><li>50kg 8 12 12 12</li></ul></li><li>罗马尼亚硬拉40kg 7 11 12 12</li></ul><h1 id="2022-07-21-星期四（手臂）"><a href="#2022-07-21-星期四（手臂）" class="headerlink" title="2022-07-21 星期四（手臂）"></a>2022-07-21 星期四（手臂）</h1><ul><li>平板窄距卧推<ul><li>20kg 20</li><li>40kg 12</li><li>50kg 8 8 8 7 5</li></ul></li><li>坐姿颈后哑铃臂屈伸<ul><li>12kg 15</li><li>24kg 12 12 12 13</li></ul></li><li>曲杆二头弯举<ul><li>15kg 16</li><li>20kg 12 10 10 12</li></ul></li><li>牧师凳曲杆窄握弯举15kg 5 8 8 10</li><li>单臂哑铃弯举8kg 9 9 9</li><li>双杠臂屈伸 12 13 12 10 8</li></ul><h1 id="2022-07-22-星期五（xjbl）"><a href="#2022-07-22-星期五（xjbl）" class="headerlink" title="2022-07-22 星期五（xjbl）"></a>2022-07-22 星期五（xjbl）</h1><ul><li>单车20分钟</li></ul><h1 id="2022-07-24-星期天（胸）"><a href="#2022-07-24-星期天（胸）" class="headerlink" title="2022-07-24 星期天（胸）"></a>2022-07-24 星期天（胸）</h1><ul><li>俯身单臂哑铃划船18kg 12</li><li>平板杠铃卧推<ul><li>20kg 20</li><li>40kg 10</li><li>50kg 9 8 8 6 5</li></ul></li><li>哑铃上斜卧推20kg 8 8 8 8</li><li>双杠臂屈伸32kg 8 9 9 9</li><li>器械推胸16.8kg 8 10</li><li>固定器械推下胸41kg 8 8 9</li><li>椭圆机20分钟</li></ul><h1 id="2022-07-25-星期一（背）"><a href="#2022-07-25-星期一（背）" class="headerlink" title="2022-07-25 星期一（背）"></a>2022-07-25 星期一（背）</h1><ul><li>高位下拉32kg 12</li><li>引体向上 6 5 6 5</li><li>杠铃俯身划船<ul><li>30kg 12 15</li><li>50kg 12 14</li><li>55kg 12 13 13 12</li></ul></li><li>俯身单臂哑铃划船24kg 8 12 12 12</li><li>器械单臂划船<ul><li>15kg 9</li><li>25kg 12</li></ul></li></ul><h1 id="2022-07-26-星期二（手臂）"><a href="#2022-07-26-星期二（手臂）" class="headerlink" title="2022-07-26 星期二（手臂）"></a>2022-07-26 星期二（手臂）</h1><ul><li>平板窄距卧推<ul><li>20kg 13</li><li>40kg 12</li><li>50kg 8 8 8 8</li></ul></li><li>坐姿颈后哑铃臂屈伸<ul><li>20kg 15</li><li>26kg 12 12 13 12</li></ul></li><li>曲杆二头弯举20kg 12 12 12</li><li>直杆二头弯举20kg 12 </li><li>单臂哑铃弯举8kg 8 9 9 9</li><li>龙门架二头弯举32kg 8</li><li>交替哑铃弯举6kg 12 13 12</li></ul><h1 id="2022-07-27-星期三（腿）"><a href="#2022-07-27-星期三（腿）" class="headerlink" title="2022-07-27 星期三（腿）"></a>2022-07-27 星期三（腿）</h1><ul><li>杠铃深蹲<ul><li>20kg 12</li><li>40kg 8</li><li>50kg 10</li><li>60kg 8 8 8 8</li></ul></li><li>罗马尼亚硬拉<ul><li>20kg 12</li><li>40kg 12</li><li>50kg 8 9 9 10 12</li></ul></li></ul><h1 id="2022-07-29-星期五（手臂）"><a href="#2022-07-29-星期五（手臂）" class="headerlink" title="2022-07-29 星期五（手臂）"></a>2022-07-29 星期五（手臂）</h1><ul><li>坐姿颈后哑铃臂屈伸<ul><li>16kg 15</li><li>24kg 15</li><li>26kg 12</li><li>28kg 12 12 13 13</li></ul></li><li>曲杆二头弯举20kg 13 12 10 10 8</li><li>单臂哑铃弯举8kg 9 8 9 9</li><li>双杠臂屈伸 15 12 10 9 9</li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;2022-07-01-星期五（xjbl）&quot;&gt;&lt;a href=&quot;#2022-07-01-星期五（xjbl）&quot; class=&quot;headerlink&quot; title=&quot;2022-07-01 星期五（xjbl）&quot;&gt;&lt;/a&gt;2022-07-01 星期五（xjbl）&lt;/h1&gt;&lt;
      
    
    </summary>
    
    
      <category term="健身" scheme="https://blog.smilexin.cn/tags/%E5%81%A5%E8%BA%AB/"/>
    
  </entry>
  
  <entry>
    <title>健身记录_202206</title>
    <link href="https://blog.smilexin.cn/2022/06/01/%E5%81%A5%E8%BA%AB%E8%AE%B0%E5%BD%95_202206.html"/>
    <id>https://blog.smilexin.cn/2022/06/01/健身记录_202206.html</id>
    <published>2022-05-31T16:00:00.000Z</published>
    <updated>2022-07-01T06:49:31.843Z</updated>
    
    <content type="html"><![CDATA[<h1 id="2022-06-01-星期三（肩）"><a href="#2022-06-01-星期三（肩）" class="headerlink" title="2022-06-01 星期三（肩）"></a>2022-06-01 星期三（肩）</h1><ul><li>实力推<ul><li>20kg 12 </li><li>25kg 10</li><li>30kg 8 8 6</li></ul></li><li>坐姿哑铃推举<ul><li>16kg 8</li><li>18kg 8 8 8 8</li></ul></li><li>器械推肩15.4kg 9 8 8 8</li><li>哑铃侧平举<ul><li>10kg 12 12 12 11</li><li>6kg 6</li><li>4kg 8</li></ul></li><li>高位下拉练后束<ul><li>32kg 12</li><li>39kg 12 12</li></ul></li><li>蝴蝶机练后束<ul><li>41kg 6</li><li>36kg 8 8 8</li></ul></li></ul><h1 id="2022-06-02-星期四（腿）"><a href="#2022-06-02-星期四（腿）" class="headerlink" title="2022-06-02 星期四（腿）"></a>2022-06-02 星期四（腿）</h1><ul><li>杠铃深蹲<ul><li>20kg 13</li><li>40kg 12</li><li>60kg 9 8 8 8 8</li></ul></li><li>哈克深蹲<ul><li>50kg 12</li><li>90kg 12 12 12 12</li></ul></li><li>二头弯举36kg 8 8 8 8</li></ul><h1 id="2022-06-03-星期五（背）"><a href="#2022-06-03-星期五（背）" class="headerlink" title="2022-06-03 星期五（背）"></a>2022-06-03 星期五（背）</h1><ul><li>引体向上 5 2 8 5 7</li><li>俯身哑铃划船<ul><li>16kg 12</li><li>22kg 8</li><li>26kg 12</li><li>24kg 12</li><li>22kg 12 15</li></ul></li><li>T杠划船30kg 12 12 12 12</li><li>窄距对握高位下拉39kg 8 8 8 8</li></ul><h1 id="2022-06-05-星期天（xjbl）"><a href="#2022-06-05-星期天（xjbl）" class="headerlink" title="2022-06-05 星期天（xjbl）"></a>2022-06-05 星期天（xjbl）</h1><ul><li>臂力器50kg 8 6 8 8</li><li>引体向上 12 5 5</li></ul><h1 id="2022-06-07-星期二（胸）"><a href="#2022-06-07-星期二（胸）" class="headerlink" title="2022-06-07 星期二（胸）"></a>2022-06-07 星期二（胸）</h1><ul><li>平板杠铃卧推<ul><li>20kg 15</li><li>40kg 12 12</li><li>50kg 8 </li><li>55kg 5</li><li>52.5kg 6 6</li></ul></li><li>哑铃上斜卧推<ul><li>20kg 12</li><li>22kg 6 6</li><li>20kg 8</li></ul></li><li>固定器械推下胸45kg 8 9 8 8</li><li>双杠臂屈伸41kg 9 12 9 10</li><li>哑铃俯身臂屈伸<ul><li>8kg 12 12 12</li><li>6kg 12 13</li></ul></li></ul><h1 id="2022-06-08-星期三（背）"><a href="#2022-06-08-星期三（背）" class="headerlink" title="2022-06-08 星期三（背）"></a>2022-06-08 星期三（背）</h1><ul><li>重锤高位下拉<ul><li>40kg 12</li><li>45kg 12 12 12 12</li></ul></li><li>俯身哑铃划船<ul><li>20kg 12 12</li><li>24kg 12 12 12</li></ul></li><li>杠铃俯身划船<ul><li>20kg 15</li><li>50kg 12</li><li>60kg 12 10 9</li></ul></li><li>坐姿v把划船45kg 8 10 8</li><li>单臂器械划船25kg 12 12</li><li>蝴蝶机练后束<ul><li>32kg 8</li><li>27kg 8 8</li></ul></li></ul><h1 id="2022-06-09-星期四（硬拉）"><a href="#2022-06-09-星期四（硬拉）" class="headerlink" title="2022-06-09 星期四（硬拉）"></a>2022-06-09 星期四（硬拉）</h1><ul><li>罗马尼亚硬拉<ul><li>20kg 13</li><li>50kg 8 8 9 9</li></ul></li><li>传统硬拉<ul><li>60kg 6</li><li>80kg 4 2 5 4 5</li><li>60kg 5</li></ul></li><li>农夫行走<ul><li>15kg 30m </li><li>20kg 20m 20m 20m 20m 20m</li></ul></li></ul><h1 id="2022-06-10-星期五（肩）"><a href="#2022-06-10-星期五（肩）" class="headerlink" title="2022-06-10 星期五（肩）"></a>2022-06-10 星期五（肩）</h1><ul><li>实力推<ul><li>20kg 12 </li><li>25kg 10</li><li>30kg 8 </li><li>32.5kg 7 8 8</li></ul></li><li>坐姿哑铃推举<ul><li>16kg 8</li><li>18kg 7 6 7 7</li></ul></li><li>哑铃侧平举12kg 8 8 8 8 6</li><li>高位下拉练后束32kg 12 12 12 12</li><li>俯身哑铃臂屈伸<ul><li>8kg 12</li><li>10kg 12 12 12</li></ul></li><li>牧师凳曲杆杠铃二头弯举20kg 8 8 8 8</li></ul><h1 id="2022-06-11-星期六（xjbl）"><a href="#2022-06-11-星期六（xjbl）" class="headerlink" title="2022-06-11 星期六（xjbl）"></a>2022-06-11 星期六（xjbl）</h1><ul><li>双杠臂屈伸 12 12 10 12 12 10</li></ul><h1 id="2022-06-13-星期一（胸）"><a href="#2022-06-13-星期一（胸）" class="headerlink" title="2022-06-13 星期一（胸）"></a>2022-06-13 星期一（胸）</h1><ul><li>平板杠铃卧推<ul><li>20kg 15</li><li>40kg 12</li><li>50kg 7</li><li>55kg 6 5</li><li>50kg 8</li></ul></li><li>哑铃上斜卧推20kg 8 9 8 9</li><li>双杠臂屈伸36kg↑ 12 12 12 10 9</li><li>平板杠铃窄推40kg 5 7 6</li><li>俯身哑铃臂屈伸8kg 12 12</li><li>龙门架绳索下压32kg 12 6</li></ul><h1 id="2022-06-14-星期二（背）"><a href="#2022-06-14-星期二（背）" class="headerlink" title="2022-06-14 星期二（背）"></a>2022-06-14 星期二（背）</h1><ul><li>引体向上 6</li><li>重锤高位下拉<ul><li>25kg 8</li><li>50kg 12 10 10 10</li></ul></li><li>俯身哑铃划船<ul><li>16kg 12 </li><li>22kg 12</li><li>24kg 12 </li><li>26kg 12 12 12</li></ul></li><li>T杠V把划船<ul><li>25kg 12</li><li>32.5kg 8 9 9 8</li></ul></li><li>高位下拉39kg 8 8</li></ul><h1 id="2022-06-15-星期三（肩）"><a href="#2022-06-15-星期三（肩）" class="headerlink" title="2022-06-15 星期三（肩）"></a>2022-06-15 星期三（肩）</h1><ul><li>坐姿哑铃推举<ul><li>6kg 18</li><li>14kg 12</li><li>18kg 12 12 10 9 8</li></ul></li><li>固定器械推肩15.4kg 12 8 8 8</li><li>哑铃侧平举10kg 12 12 12 12</li><li>俯身哑铃侧平举<ul><li>4kg 12 12</li><li>6kg 12 12 12</li></ul></li><li>高位下拉练后束<ul><li>32kg 13</li><li>39kg 12 10 12 10</li></ul></li></ul><h1 id="2022-06-16-星期四（腿）"><a href="#2022-06-16-星期四（腿）" class="headerlink" title="2022-06-16 星期四（腿）"></a>2022-06-16 星期四（腿）</h1><ul><li>杠铃深蹲<ul><li>20kg 8 12</li><li>40kg 12</li><li>45kg 12 12</li><li>50kg 12 12 12</li></ul></li><li>坡度快走 15min</li></ul><h1 id="2022-06-17-星期五（胸）"><a href="#2022-06-17-星期五（胸）" class="headerlink" title="2022-06-17 星期五（胸）"></a>2022-06-17 星期五（胸）</h1><ul><li>平板杠铃卧推<ul><li>30kg 15 6</li><li>50kg 8 8 8 8</li></ul></li><li>哑铃上斜卧推20kg 10 10 10 10</li><li>双杠臂屈伸32kg 9 10 8 9 7</li><li>固定器械推下胸45kg 8 6 8 7</li><li>上斜卷腹<ul><li>2阶 12 </li><li>3阶 9 9 8</li></ul></li><li>悬垂卷腹 10 10</li></ul><h1 id="2022-06-19-星期天（背）"><a href="#2022-06-19-星期天（背）" class="headerlink" title="2022-06-19 星期天（背）"></a>2022-06-19 星期天（背）</h1><ul><li>引体向上 8 8 6</li><li>重锤高位下拉<ul><li>35kg 8</li><li>45kg 8 8 12</li></ul></li><li>俯身杠铃划船<ul><li>40kg 12</li><li>50kg 12</li><li>60kg 8 8</li><li>50kg 10 12</li></ul></li><li>单臂器械划船25kg 9 10 9</li><li>俯身哑铃划船<ul><li>16kg 9</li><li>26kg 8 8 8 8</li></ul></li></ul><h1 id="2022-06-20-星期一（肩）"><a href="#2022-06-20-星期一（肩）" class="headerlink" title="2022-06-20 星期一（肩）"></a>2022-06-20 星期一（肩）</h1><ul><li>实力推<ul><li>20kg 12 </li><li>25kg 8 8</li><li>30kg 8 8 8</li></ul></li><li>坐姿哑铃推举<ul><li>16kg 9</li><li>18kg 8 9 8 8</li></ul></li><li>器械推举15.4kg 8 10 9</li><li>哑铃侧平举<ul><li>10kg 13</li><li>12kg 8 10 9 8</li></ul></li><li>高位下拉练后束39kg 10 12 10 9</li></ul><h1 id="2022-06-21-星期二（手臂）"><a href="#2022-06-21-星期二（手臂）" class="headerlink" title="2022-06-21 星期二（手臂）"></a>2022-06-21 星期二（手臂）</h1><ul><li>直杆杠铃弯举10kg 15</li><li>曲杠杠铃弯举20kg 10 10 10 10</li><li>龙门架二头绳索锤式弯举<ul><li>14kg 8</li><li>18kg 10</li></ul></li><li>哑铃二头弯举<ul><li>4kg 12</li><li>6kg 12</li><li>8kg 8 10</li></ul></li><li>窄距杠铃卧推<ul><li>30kg 12</li><li>40kg 10</li><li>45kg 8 9 9 8</li></ul></li><li>双杠臂屈伸 9 9 8 9</li><li>龙门架二头弯举<ul><li>32kg 8</li><li>36kg 8 8 8</li></ul></li><li>哑铃锤式弯举<ul><li>4kg 12</li><li>8kg 7 7</li><li>6kg 8 10</li></ul></li><li>直杆杠铃二头弯举<ul><li>10kg 12</li><li>15kg 12 12</li></ul></li></ul><h1 id="2022-06-22-星期三（胸）"><a href="#2022-06-22-星期三（胸）" class="headerlink" title="2022-06-22 星期三（胸）"></a>2022-06-22 星期三（胸）</h1><ul><li>平板杠铃卧推<ul><li>20kg 12</li><li>40kg 12</li><li>50kg 8 8 9 8</li></ul></li><li>哑铃上斜卧推20kg 8 10 9 8</li><li>双杠臂屈伸32kg 8 8 8 8</li><li>固定器械推下胸<ul><li>45kg 7 6 6</li><li>41kg 8</li></ul></li></ul><h1 id="2022-06-23-星期四（背）"><a href="#2022-06-23-星期四（背）" class="headerlink" title="2022-06-23 星期四（背）"></a>2022-06-23 星期四（背）</h1><ul><li>引体向上32kg↑ 8</li><li>引体向上 6 7 6 5</li><li>高位下拉39kg 8 9</li><li>单臂哑铃划船<ul><li>14kg 10</li><li>20kg 9</li><li>26kg 8 12 12 12</li></ul></li><li>坐姿v把绳索划船45kg 10 10 8 9</li><li>单臂哑铃划船20kg 12</li><li>锤式二头弯举8kg 9 10 9</li><li>直杆杠铃二头弯举15kg 12</li><li>曲杠二头弯举<ul><li>15kg 12</li><li>20kg 8 9</li></ul></li></ul><h1 id="2022-06-24-星期五（肩）"><a href="#2022-06-24-星期五（肩）" class="headerlink" title="2022-06-24 星期五（肩）"></a>2022-06-24 星期五（肩）</h1><ul><li>实力推<ul><li>20kg 10</li><li>25kg 8 </li><li>30kg 8</li><li>32.5kg 8 8 8</li></ul></li><li>坐姿哑铃推举<ul><li>18kg 8 9 8</li><li>16kg 9</li></ul></li><li>器械推举15.4kg 9 10 8</li><li>哑铃侧平举12kg 10 10 10 11</li><li>高位下拉练后束45kg 10 10 10 9</li></ul><h1 id="2022-06-27-星期一（胸）"><a href="#2022-06-27-星期一（胸）" class="headerlink" title="2022-06-27 星期一（胸）"></a>2022-06-27 星期一（胸）</h1><ul><li>单臂哑铃划船14kg 12</li><li>平板杠铃卧推<ul><li>20kg 12</li><li>40kg 9 9</li><li>55kg 8 7 6</li></ul></li><li>哑铃上斜卧推20kg 8 12 11 11</li><li>双杠臂屈伸32kg 10 12 10 9</li><li>俯身哑铃臂屈伸<ul><li>8kg 12</li><li>10kg 12</li><li>12kg 9 12</li></ul></li><li>固定器械推下胸45kg 12 9</li></ul><h1 id="2022-06-28-星期二（背）"><a href="#2022-06-28-星期二（背）" class="headerlink" title="2022-06-28 星期二（背）"></a>2022-06-28 星期二（背）</h1><ul><li>引体向上 7 8 6 8</li><li>单臂哑铃划船<ul><li>14kg 8</li><li>18kg 9</li><li>24kg 8</li><li>26kg 8 12 12 12 12</li></ul></li><li>坐姿绳索划船v把45kg 10 10 10 10 10</li><li>宽距高位下拉<ul><li>45kg 8</li><li>39kg 8</li></ul></li><li>V把高位下拉39kg 7 6 6</li><li>龙门架二头弯举32kg 10</li><li>曲杆杠铃二头弯举20kg 8</li><li>单臂哑铃锤式弯举8kg 9 9 8</li></ul><h1 id="2022-06-29-星期三（肩）"><a href="#2022-06-29-星期三（肩）" class="headerlink" title="2022-06-29 星期三（肩）"></a>2022-06-29 星期三（肩）</h1><ul><li>坐姿哑铃推举12kg 12</li><li>实力推<ul><li>20kg 8</li><li>25kg 8 </li><li>35kg 6 6 7</li></ul></li><li>坐姿哑铃推举18kg 8 9 10 10</li><li>哑铃侧平举12kg 12 10 10 10</li><li>蝴蝶机练后束27kg 12 12 12 12</li><li>高位下拉练后束39kg 10 10 8 10</li></ul><h1 id="2022-06-30-星期四（手臂）"><a href="#2022-06-30-星期四（手臂）" class="headerlink" title="2022-06-30 星期四（手臂）"></a>2022-06-30 星期四（手臂）</h1><ul><li>二头哑铃弯举12kg 8 8</li><li>曲杆杠铃二头弯举20kg 10 10</li><li>牧师凳二头弯举<ul><li>15kg 12</li><li>20kg 10 8</li></ul></li><li>单臂哑铃锤式弯举8kg 8 9</li><li>平板杠铃窄距卧推<ul><li>20kg 12</li><li>40kg 12</li><li>50kg 8 8 8</li></ul></li><li>俯身哑铃臂屈伸10kg 12 12</li><li>双杠臂屈伸 12 12 11 10 8</li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;2022-06-01-星期三（肩）&quot;&gt;&lt;a href=&quot;#2022-06-01-星期三（肩）&quot; class=&quot;headerlink&quot; title=&quot;2022-06-01 星期三（肩）&quot;&gt;&lt;/a&gt;2022-06-01 星期三（肩）&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;实力推&lt;
      
    
    </summary>
    
    
      <category term="健身" scheme="https://blog.smilexin.cn/tags/%E5%81%A5%E8%BA%AB/"/>
    
  </entry>
  
  <entry>
    <title>健身记录_202205</title>
    <link href="https://blog.smilexin.cn/2022/05/06/%E5%81%A5%E8%BA%AB%E8%AE%B0%E5%BD%95_202205.html"/>
    <id>https://blog.smilexin.cn/2022/05/06/健身记录_202205.html</id>
    <published>2022-05-05T16:00:00.000Z</published>
    <updated>2022-05-31T06:57:26.740Z</updated>
    
    <content type="html"><![CDATA[<h1 id="2022-05-05-星期四（拉）"><a href="#2022-05-05-星期四（拉）" class="headerlink" title="2022-05-05 星期四（拉）"></a>2022-05-05 星期四（拉）</h1><ul><li>宽距引体向上<ul><li>0kg 8 8 8</li><li>27kg 5.5 6</li></ul></li><li>俯身哑铃划船<ul><li>10kg 12</li><li>12kg 12</li></ul></li><li>俯身杠铃划船<ul><li>20kg 15</li><li>40kg 15</li><li>50kg 13</li><li>60kg 12 12 9 10</li></ul></li><li>器械单臂划船25kg 10 8 10 10</li><li>V把高位下拉39kg 7 7 6 7</li></ul><h1 id="2022-05-06-星期五（推）"><a href="#2022-05-06-星期五（推）" class="headerlink" title="2022-05-06 星期五（推）"></a>2022-05-06 星期五（推）</h1><ul><li>实力推<ul><li>20kg 12 12</li><li>30kg 8 8 8 5 5</li></ul></li><li>平板杠铃卧推<ul><li>20kg 12</li><li>40kg 12</li><li>45kg 8 8 8 5 4</li></ul></li><li>坐姿上斜哑铃卧推<ul><li>20kg 5 5</li><li>18kg 6 5</li></ul></li><li>器械推胸16.8kg 9 9 8 8</li><li>双杠臂屈伸41kg 8 8 8 8</li></ul><h1 id="2022-05-07-星期六（腿）"><a href="#2022-05-07-星期六（腿）" class="headerlink" title="2022-05-07 星期六（腿）"></a>2022-05-07 星期六（腿）</h1><ul><li>杠铃深蹲<ul><li>20kg 16</li><li>40kg 15</li><li>50kg 15 12 13 12 14 10</li></ul></li></ul><h1 id="2022-05-09-星期一（拉）"><a href="#2022-05-09-星期一（拉）" class="headerlink" title="2022-05-09 星期一（拉）"></a>2022-05-09 星期一（拉）</h1><ul><li>宽距引体向上 8 </li><li>指扣引体 8 7</li><li>宽距引体向上 7 5.5</li><li>俯身杠铃划船<ul><li>20kg 15</li><li>40kg 15</li><li>50kg 12</li><li>60kg 10 10 10 10</li></ul></li><li>器械单臂划船<ul><li>15kg 12</li><li>25kg 12 12 12 12</li></ul></li><li>对握高位下拉39kg 10 10 10 8</li><li>绳索器械高位下拉32kg 12</li></ul><h1 id="2022-05-10-星期二（推）"><a href="#2022-05-10-星期二（推）" class="headerlink" title="2022-05-10 星期二（推）"></a>2022-05-10 星期二（推）</h1><ul><li>俯卧撑 30</li><li>平板杠铃卧推<ul><li>20kg 10</li><li>40kg 12</li><li>50kg 8 7 5 7 4</li></ul></li><li>哑铃上斜卧推20kg 8 7 6 6</li><li>器械推胸21.8kg 6 6 6 6</li><li>双杠臂屈伸41kg↑ 8 9 8 9</li><li>悬垂卷腹 12 12 12 8 6</li></ul><h1 id="2022-05-11-星期三（腿）"><a href="#2022-05-11-星期三（腿）" class="headerlink" title="2022-05-11 星期三（腿）"></a>2022-05-11 星期三（腿）</h1><ul><li>硬拉<ul><li>20kg 16</li><li>60kg 6 6</li><li>80kg 6 6 6 6 6</li></ul></li><li>倒蹬<ul><li>30kg 16</li><li>80kg 12 12 13 14</li></ul></li><li>上斜卷腹 12 12 13 15 14</li><li>坐姿夹腿36kg 30 31 30 30</li></ul><h1 id="2022-05-12-星期四（拉）"><a href="#2022-05-12-星期四（拉）" class="headerlink" title="2022-05-12 星期四（拉）"></a>2022-05-12 星期四（拉）</h1><ul><li>宽距引体向上 8 8 7 6</li><li>俯身杠铃划船<ul><li>20kg 17</li><li>40kg 15</li><li>50kg 12 12</li><li>55kg 10 12 12 12</li></ul></li><li>器械单臂划船<ul><li>20kg 12</li><li>25kg 12 12 12 12</li></ul></li><li>宽距高位下拉39kg 6 8 8 8</li><li>蝴蝶机练后束23kg 10 10 10</li></ul><h1 id="2022-05-13-星期五（推）"><a href="#2022-05-13-星期五（推）" class="headerlink" title="2022-05-13 星期五（推）"></a>2022-05-13 星期五（推）</h1><ul><li>平板杠铃卧推<ul><li>20kg 16</li><li>40kg 12 12</li><li>45kg 12 10 9</li></ul></li><li>哑铃上斜卧推<ul><li>20kg 8 9 9 7</li><li>18kg 7</li></ul></li><li>固定器械推下胸41kg 8 8 8 8</li><li>史密斯窄距卧推<ul><li>10kg 12</li><li>20kg 8 10 9 9</li></ul></li><li>上斜卷腹 12 13 12 15 12</li></ul><h1 id="2022-05-14-星期六（推肩）"><a href="#2022-05-14-星期六（推肩）" class="headerlink" title="2022-05-14 星期六（推肩）"></a>2022-05-14 星期六（推肩）</h1><ul><li>实力推<ul><li>30kg 8 8 8 12</li><li>32.5kg 8 12 8 6 6</li><li>20kg 12 12</li></ul></li></ul><h1 id="2022-05-16-星期一（拉）"><a href="#2022-05-16-星期一（拉）" class="headerlink" title="2022-05-16 星期一（拉）"></a>2022-05-16 星期一（拉）</h1><ul><li>重锤高位下拉<ul><li>30kg 13</li><li>45kg 12 12 12 12</li></ul></li><li>单臂哑铃俯身划船<ul><li>12kg 12</li><li>14kg 12</li><li>16kg 12</li><li>18kg 12</li><li>22kg 12</li><li>24kg 12 12 12 12</li></ul></li><li>蝴蝶机练后束23kg 12 12 12 12</li><li>龙门架二头弯举<ul><li>27kg 12</li><li>36kg 9 8 8 6</li></ul></li></ul><h1 id="2022-05-17-星期二（肩）"><a href="#2022-05-17-星期二（肩）" class="headerlink" title="2022-05-17 星期二（肩）"></a>2022-05-17 星期二（肩）</h1><ul><li>坐姿哑铃推举<ul><li>10kg 15</li><li>16kg 12</li><li>18kg 8 9 8 8</li></ul></li><li>器械推举15.4kg 8 8 8 8</li><li>哑铃侧平举<ul><li>6kg 15</li><li>8kg 12</li><li>10kg 9 7.7 8</li><li>8kg 8</li><li>6kg 10</li><li>4kg 10 12</li></ul></li><li>蝴蝶机练后束32kg 8 12 8 8</li><li>高位下拉练后束<ul><li>27kg 12 13</li><li>32kg 12 12</li></ul></li></ul><h1 id="2022-05-18-星期三（胸）"><a href="#2022-05-18-星期三（胸）" class="headerlink" title="2022-05-18 星期三（胸）"></a>2022-05-18 星期三（胸）</h1><ul><li>平板杠铃卧推<ul><li>20kg 16</li><li>40kg 12 12</li><li>45kg 8 8</li></ul></li><li>固定器械推下胸45kg 8 8 8 8 8</li><li>双杠臂屈伸45kg↑ 8 9 12 12</li><li>蝴蝶机夹胸36kg 7 7 7 7</li></ul><h1 id="2022-05-19-星期四（背）"><a href="#2022-05-19-星期四（背）" class="headerlink" title="2022-05-19 星期四（背）"></a>2022-05-19 星期四（背）</h1><ul><li>重锤高位下拉<ul><li>35kg 12</li><li>55kg 12 12 8 8 8</li></ul></li><li>单臂哑铃俯身划船<ul><li>12kg 12</li><li>20kg 12</li></ul></li><li>杠铃俯身划船<ul><li>30kg 15</li><li>50kg 13</li><li>62.5kg 9 9 9 9</li></ul></li><li>T杠划船<ul><li>10kg 15</li><li>20kg 12</li><li>30kg 12 12 12 12</li></ul></li><li>直臂下压27kg 12 12 9</li></ul><h1 id="2022-05-20-星期五（腿）"><a href="#2022-05-20-星期五（腿）" class="headerlink" title="2022-05-20 星期五（腿）"></a>2022-05-20 星期五（腿）</h1><ul><li>杠铃深蹲<ul><li>20kg 12</li><li>30kg 12</li><li>50kg 15 16 16 15</li></ul></li><li>倒蹬40kg 13 12 13 15</li></ul><h1 id="2022-05-21-星期六（背）"><a href="#2022-05-21-星期六（背）" class="headerlink" title="2022-05-21 星期六（背）"></a>2022-05-21 星期六（背）</h1><ul><li>引体向上 7 7 5 6 4 4 5 2 1</li></ul><h1 id="2022-05-23-星期一（胸）"><a href="#2022-05-23-星期一（胸）" class="headerlink" title="2022-05-23 星期一（胸）"></a>2022-05-23 星期一（胸）</h1><ul><li>平板杠铃卧推<ul><li>20kg 20</li><li>40kg 12 </li><li>50kg 8 8 8 8</li></ul></li><li>哑铃上斜卧推22kg 6 6 6 6</li><li>固定器械推下胸45kg 9 8 9 8</li><li>双杠臂屈伸45kg↑ 12 12 12 12</li></ul><h1 id="2022-05-24-星期二（拉）"><a href="#2022-05-24-星期二（拉）" class="headerlink" title="2022-05-24 星期二（拉）"></a>2022-05-24 星期二（拉）</h1><ul><li>重锤高位下拉<ul><li>40kg 13</li><li>50kg 10 9 9 8</li></ul></li><li>单臂哑铃俯身划船<ul><li>14kg 12</li><li>20kg 12</li><li>24kg 12</li><li>26kg 12 12 12 12</li></ul></li><li>T杠划船<ul><li>30kg 12 </li><li>35kg 9 8 8</li></ul></li><li>直臂下压27kg 12 12 12 9</li><li>高位下拉练后束32kg 12 12 12 12</li></ul><h1 id="2022-05-25-星期三（肩）"><a href="#2022-05-25-星期三（肩）" class="headerlink" title="2022-05-25 星期三（肩）"></a>2022-05-25 星期三（肩）</h1><h2 id="中午"><a href="#中午" class="headerlink" title="中午"></a>中午</h2><ul><li>实力推<ul><li>20kg 8 12</li><li>30kg 8 8 8 8</li></ul></li><li>坐姿哑铃推举16kg 9 8 9 9</li><li>固定器械推肩15.4kg 8 9 8 6</li><li>哑铃侧平举<ul><li>10kg 12 12 12 10</li><li>6kg 7</li><li>4kg 11</li></ul></li><li>蝴蝶机练后束<ul><li>27kg 12</li><li>32kg 12 12 10</li></ul></li></ul><h2 id="夜晚"><a href="#夜晚" class="headerlink" title="夜晚"></a>夜晚</h2><ul><li>双杠臂屈伸 12 12 13 12 15 9 12 9 8</li></ul><h1 id="2022-05-26-星期四（硬拉）"><a href="#2022-05-26-星期四（硬拉）" class="headerlink" title="2022-05-26 星期四（硬拉）"></a>2022-05-26 星期四（硬拉）</h1><ul><li>传统硬拉<ul><li>60kg 6 8</li><li>80kg 6 6 5 4</li><li>90kg 2</li><li>100kg 1</li><li>60kg 3</li></ul></li></ul><h1 id="2022-05-27-星期五（胸）"><a href="#2022-05-27-星期五（胸）" class="headerlink" title="2022-05-27 星期五（胸）"></a>2022-05-27 星期五（胸）</h1><ul><li>平板杠铃卧推<ul><li>20kg 18</li><li>40kg 12 </li><li>50kg 8 8 8 5</li><li>55kg 2</li></ul></li><li>哑铃上斜卧推20kg 8 8 8</li><li>固定器械推下胸45kg 10 8 8 6 8</li></ul><h1 id="2022-05-30-星期一（拉）"><a href="#2022-05-30-星期一（拉）" class="headerlink" title="2022-05-30 星期一（拉）"></a>2022-05-30 星期一（拉）</h1><ul><li>重锤高位下拉<ul><li>20kg 12</li><li>40kg 12</li><li>50kg 9 10 9 9</li></ul></li><li>俯身杠铃划船<ul><li>30kg 12</li><li>50kg 12</li><li>60kg 12 12 12 12</li></ul></li><li>俯身T杠V把划船<ul><li>30kg 12 </li><li>35kg 12 12 12 9</li></ul></li><li>直臂下压27kg 12 12 12 12</li></ul><h1 id="2022-05-31-星期二（胸）"><a href="#2022-05-31-星期二（胸）" class="headerlink" title="2022-05-31 星期二（胸）"></a>2022-05-31 星期二（胸）</h1><ul><li>平板杠铃卧推<ul><li>20kg 20</li><li>40kg 12 </li><li>50kg 8 8 8 8</li></ul></li><li>哑铃上斜卧推20kg 8 8 8 8</li><li>固定器械推下胸45kg 9 12 8 8</li><li>双杠臂屈伸41kg 12 9 10 9</li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;2022-05-05-星期四（拉）&quot;&gt;&lt;a href=&quot;#2022-05-05-星期四（拉）&quot; class=&quot;headerlink&quot; title=&quot;2022-05-05 星期四（拉）&quot;&gt;&lt;/a&gt;2022-05-05 星期四（拉）&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;宽距引体
      
    
    </summary>
    
    
      <category term="健身" scheme="https://blog.smilexin.cn/tags/%E5%81%A5%E8%BA%AB/"/>
    
  </entry>
  
  <entry>
    <title>5x5力量训练增肌计划参考</title>
    <link href="https://blog.smilexin.cn/2022/04/01/5x5%E5%8A%9B%E9%87%8F%E8%AE%AD%E7%BB%83%E5%A2%9E%E8%82%8C%E8%AE%A1%E5%88%92%E5%8F%82%E8%80%83.html"/>
    <id>https://blog.smilexin.cn/2022/04/01/5x5力量训练增肌计划参考.html</id>
    <published>2022-03-31T16:00:00.000Z</published>
    <updated>2022-04-01T08:18:10.365Z</updated>
    
    <content type="html"><![CDATA[<h1 id="观点"><a href="#观点" class="headerlink" title="观点"></a>观点</h1><p>5x5在国内被认为是力量举的入门计划，但是它同样可以用于健美、增肌上，基于以下观点：</p><ol><li>一个能够卧推120kg的人胸肌肯定不会小到哪去，这是不可否认的。</li><li>对于自然训练的健身爱好者来说，大重量训练是很有必要的，通过较低次数而非所谓12RM的大重量刺激，对于自然训练者收效更大，特别是新手。（健身几年下来我认为这个观念对我帮助很大，就算不是用5x5计划我也觉得应该尽可能的尝试突破重量）</li><li>5x5计划可以快速地为身体打下力量基础，提高全身肌群的力量，设想一下卧推的重量上去了，胸、肩、三头的力量得到增强，当你做器械的推举、绳索三头下压等等动作也同样会有重量增长，这些器械动作的重量提升肯定会为你带来更多的收益。</li><li>完全的5x5力量训练强度、重量很大，但每个动作都是全身的复合性动作，虽然身体负荷很高，但个人认为还是应该对目标肌群加上适当的孤立性刺激，在强度、重量得到保证的前提下，增加训练的容量。</li></ol><h1 id="使用的前提"><a href="#使用的前提" class="headerlink" title="使用的前提"></a>使用的前提</h1><ul><li>动作标准：这个计划的主体就是大重量的深蹲卧推硬拉，所以一定要确保这三大项的动作达到尚可接受的程度。至于怎么学习动作，B站、知乎有大量视频和教程。</li><li>持续学习：在力量进步的同时三大项重量不断增加，对身体的负荷也会更大，这就要求你不断优化动作，发现动作中的细节错误，否则一个小的细节错误在长期的大重量刺激下势必造成受伤。另外，优化动作也有利于自己完成更大的重量。</li><li>训练时间：一个深蹲/卧推/硬拉动作，由热身到完成5组正式组的时间可能要超过45分钟，加上其余的补充动作，总体时间一般在75分钟以上，而且日常频率也要求比较高，一周五六练都有可能。</li></ul><h1 id="渐进高强度"><a href="#渐进高强度" class="headerlink" title="渐进高强度"></a>渐进高强度</h1><p>这是增肌的一个大原则，也是5x5计划的重要实现方法。我们知道健身具有新手期效应，新手的力量增长是最快的，但是很多人在训练两三年后，由于缺乏渐进的刺激，缺少方法，仍然没有什么进步，也就是说仍然处在新手期，仍然具有新手期效应。5x5可以很好的榨干新手期效应，直到碰到瓶颈之前都是一直进步的，而当碰到瓶颈的时候此时身体状态、身材、力量都已经超过很多人了。</p><p>对于刚开始计划的人，首次训练的重量可以选择一个比较轻松可以完成5组5次的重量，一开始可能会觉得这个训练很轻松，但是只要过段时间就会开始感受到它的强度。</p><p>每次训练都应该尽力完成当日目标重量5x5，如果能够成功完成，下次的训练重量就要相应增加一点。对于卧推，每次可以增加2.5kg左右，对于深蹲、硬拉，每次可以增加5kg左右。</p><p>比如，今日成功完成了卧推60kg的5x5，那么下次的计划应该是在杠的两边各加上1.25kg的小杠铃片（如果是硬拉或深蹲，则加2.5kg），完成62.5kg的5x5，如果成功完成，那么再下次训练，可以再加一次。</p><p>在新手时候，这个过程几乎是直线上升的，很快就可以达到一个客观的重量，身体也在不断增肌，直到自己触碰到某个瓶颈期，如果完成不了当日的5x5目标重量，则下次应该进行deload。（笔者使用计划的一年里碰到需要deload的次数其实很少，所以要参照“使用的前提”部分，多加深动作学习，多吃饭，多睡觉）</p><h1 id="组间休息"><a href="#组间休息" class="headerlink" title="组间休息"></a>组间休息</h1><p>在进行深蹲、卧推、硬拉的5x5训练时，组间休息可以比较长，甚至达到5分钟也行。判断的依据是要休息到保证自己能够尽可能的完成下一组的5次，一般是4分钟。（这也是它经常被误认为是力量举训练计划的原因之一，力量举大重量极低次数的训练组间休息可能达到好几分钟）</p><p>当日剩余的其他容量动作，休息时间就要尽可能短一些了，30秒、60秒也可以，要保证强度到位。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;观点&quot;&gt;&lt;a href=&quot;#观点&quot; class=&quot;headerlink&quot; title=&quot;观点&quot;&gt;&lt;/a&gt;观点&lt;/h1&gt;&lt;p&gt;5x5在国内被认为是力量举的入门计划，但是它同样可以用于健美、增肌上，基于以下观点：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;一个能够卧推120kg的人胸
      
    
    </summary>
    
    
      <category term="健身" scheme="https://blog.smilexin.cn/tags/%E5%81%A5%E8%BA%AB/"/>
    
  </entry>
  
  <entry>
    <title>健身记录_202204</title>
    <link href="https://blog.smilexin.cn/2022/04/01/%E5%81%A5%E8%BA%AB%E8%AE%B0%E5%BD%95_202204.html"/>
    <id>https://blog.smilexin.cn/2022/04/01/健身记录_202204.html</id>
    <published>2022-03-31T16:00:00.000Z</published>
    <updated>2022-05-05T03:14:48.914Z</updated>
    
    <content type="html"><![CDATA[<h1 id="2022-04-01-星期五（胸）"><a href="#2022-04-01-星期五（胸）" class="headerlink" title="2022-04-01 星期五（胸）"></a>2022-04-01 星期五（胸）</h1><ul><li>平板杠铃卧推<ul><li>20kg 20</li><li>40kg 9</li><li>50kg 8</li><li>52.5kg 6 6 5 5</li></ul></li><li>哑铃上斜卧推22kg 8 6 6 5 4</li><li>双杠臂屈伸45kg 10 10 10 10</li></ul><h1 id="2022-04-02-星期六（有氧）"><a href="#2022-04-02-星期六（有氧）" class="headerlink" title="2022-04-02 星期六（有氧）"></a>2022-04-02 星期六（有氧）</h1><p>阻力单车30分钟</p><h1 id="2022-04-04-星期一（胸）"><a href="#2022-04-04-星期一（胸）" class="headerlink" title="2022-04-04 星期一（胸）"></a>2022-04-04 星期一（胸）</h1><ul><li>杠铃上斜卧推<ul><li>20kg 15</li><li>40kg 10</li><li>50kg 5 5 5 6</li></ul></li><li>杠铃平板卧推50kg 8 8 8 7</li><li>双杠臂屈伸 3 5 5 6</li></ul><h1 id="2022-04-06-星期三（背）"><a href="#2022-04-06-星期三（背）" class="headerlink" title="2022-04-06 星期三（背）"></a>2022-04-06 星期三（背）</h1><h2 id="中午"><a href="#中午" class="headerlink" title="中午"></a>中午</h2><ul><li>宽距引体向上 8 8 8 8</li><li>俯身杠铃划船<ul><li>20kg 9</li><li>40kg 8</li></ul></li><li>单臂划船40kg 6 6</li><li>俯身杠铃划船<ul><li>30kg 12</li><li>40kg 10 12</li><li>45kg 11 12</li><li>50kg 11</li><li>55kg 7 8</li></ul></li><li>器械面拉32kg 12 8 9 8</li></ul><h2 id="晚上"><a href="#晚上" class="headerlink" title="晚上"></a>晚上</h2><ul><li>宽距引体向上<ul><li>负重0kg 6</li><li>负重5kg 4 3 2.5</li><li>负重0kg 3</li></ul></li><li>俯身杠铃划船<ul><li>20kg 13</li><li>40kg 12</li><li>50kg 13</li><li>55kg 8 9 8 8</li><li>20kg 10</li></ul></li></ul><h1 id="2022-04-07-星期四（腿）"><a href="#2022-04-07-星期四（腿）" class="headerlink" title="2022-04-07 星期四（腿）"></a>2022-04-07 星期四（腿）</h1><ul><li>杠铃深蹲<ul><li>20kg 12</li><li>40kg 8</li><li>60kg 8 8 8 8</li></ul></li><li>传统硬拉<ul><li>60kg 3</li><li>80kg 5 8 8 8</li></ul></li></ul><h1 id="2022-04-08-星期五（推）"><a href="#2022-04-08-星期五（推）" class="headerlink" title="2022-04-08 星期五（推）"></a>2022-04-08 星期五（推）</h1><ul><li>实力推<ul><li>20kg 12</li><li>30kg 8 8 8 8</li></ul></li><li>平板杠铃卧推<ul><li>20kg 12</li><li>50kg 8 7 8 6 2</li></ul></li><li>上斜哑铃卧推<ul><li>22kg 5 5 5 4</li><li>20kg 5</li></ul></li><li>双杠臂屈伸45kg 12 12 12 12</li></ul><h1 id="2022-04-09-星期六（背）"><a href="#2022-04-09-星期六（背）" class="headerlink" title="2022-04-09 星期六（背）"></a>2022-04-09 星期六（背）</h1><ul><li>引体向上 6 8 8 6 6</li></ul><h1 id="2022-04-10-星期天（背）"><a href="#2022-04-10-星期天（背）" class="headerlink" title="2022-04-10 星期天（背）"></a>2022-04-10 星期天（背）</h1><ul><li>引体向上 8 8 8</li></ul><h1 id="2022-04-11-星期一（拉）"><a href="#2022-04-11-星期一（拉）" class="headerlink" title="2022-04-11 星期一（拉）"></a>2022-04-11 星期一（拉）</h1><ul><li>俯身划船肩后束<ul><li>15kg 12</li><li>20kg 12 </li><li>30kg 10 8</li></ul></li><li>变式高位下拉肩后束<ul><li>32kg 12</li><li>39kg 8 8 8 8</li></ul></li><li>杠铃俯身划船<ul><li>30kg 12</li><li>50kg 12 12 14</li><li>55kg 9 10</li></ul></li><li>窄距对握器械划船45kg 8 9 8</li><li>窄距对握高位下拉39kg 6 8 8 6</li></ul><h1 id="2022-04-12-星期二（推）"><a href="#2022-04-12-星期二（推）" class="headerlink" title="2022-04-12 星期二（推）"></a>2022-04-12 星期二（推）</h1><ul><li>平板杠铃卧推<ul><li>20kg 22</li><li>40kg 10</li><li>50kg 8 9 8 8</li></ul></li><li>上斜哑铃卧推22kg 8 7 7 6</li><li>实力推<ul><li>20kg 8</li><li>30kg 6 6 7 6</li></ul></li></ul><h1 id="2022-04-13-星期三（腿）"><a href="#2022-04-13-星期三（腿）" class="headerlink" title="2022-04-13 星期三（腿）"></a>2022-04-13 星期三（腿）</h1><ul><li>杠铃深蹲<ul><li>20kg 8</li><li>40kg 12</li><li>50kg 8 8</li><li>60kg 8 8 8</li></ul></li><li>坐姿夹腿<ul><li>32kg 12</li><li>36kg 26</li><li>45kg 10 8 8 12</li></ul></li></ul><h1 id="2022-04-14-星期四（拉）"><a href="#2022-04-14-星期四（拉）" class="headerlink" title="2022-04-14 星期四（拉）"></a>2022-04-14 星期四（拉）</h1><ul><li>蝴蝶机练后束36kg 8 8 8 8</li><li>宽距引体 8 8 8 8</li><li>俯身杠铃划船<ul><li>30kg 14</li><li>50kg 6</li><li>55kg 10 10 10 12</li></ul></li><li>龙门架对握高位下拉68kg 12 12</li><li>中距对握高位下拉39kg 8 9 8</li><li>农夫行走30kg 30m 30m 30m 30m</li></ul><h1 id="2022-04-15-星期五（推）"><a href="#2022-04-15-星期五（推）" class="headerlink" title="2022-04-15 星期五（推）"></a>2022-04-15 星期五（推）</h1><h1 id="午"><a href="#午" class="headerlink" title="午"></a>午</h1><ul><li>实力推<ul><li>20kg 8</li><li>30kg 8 8 8 8</li></ul></li><li>杠铃卧推<ul><li>20kg 12</li><li>40kg 8</li><li>50kg 8 8 8 6</li></ul></li><li>哑铃上斜卧推22kg 6 6 6 5</li><li>双杠臂屈伸45kg↑ 12 12 12 12</li></ul><h2 id="晚"><a href="#晚" class="headerlink" title="晚"></a>晚</h2><ul><li>杠铃划船<ul><li>25kg 12</li><li>45kg 12</li><li>55kg 12</li><li>60kg 12 12 13 13</li></ul></li></ul><h1 id="2022-04-18-星期一（推）"><a href="#2022-04-18-星期一（推）" class="headerlink" title="2022-04-18 星期一（推）"></a>2022-04-18 星期一（推）</h1><ul><li>实力推<ul><li>20kg 8</li><li>30kg 8 8 8 8</li></ul></li><li>杠铃卧推<ul><li>20kg 13</li><li>50kg 8 6 8 6</li></ul></li><li>哑铃上斜卧推20kg 8 8 8 7</li><li>农夫行走30kg 30m 30m 30m 30m</li><li>器械推胸<ul><li>41kg 12</li><li>50kg 8 5</li></ul></li></ul><h1 id="2022-04-19-星期二（拉）"><a href="#2022-04-19-星期二（拉）" class="headerlink" title="2022-04-19 星期二（拉）"></a>2022-04-19 星期二（拉）</h1><ul><li>宽距引体向上 8 7 8 8</li><li>俯身杠铃划船<ul><li>30kg 16</li><li>50kg 12</li><li>55kg 12 12 12</li><li>60kg 12</li></ul></li><li>高位下拉39kg 8 9 12 10</li></ul><h1 id="2022-04-20-星期三（腿）"><a href="#2022-04-20-星期三（腿）" class="headerlink" title="2022-04-20 星期三（腿）"></a>2022-04-20 星期三（腿）</h1><ul><li>杠铃深蹲<ul><li>30kg 12</li><li>50kg 8 </li><li>60kg 8 8 8 8</li></ul></li><li>俯身腿屈伸36kg 8 8 8 8</li><li>坐姿夹腿41kg 12 12 12 12 12</li></ul><h1 id="2022-04-21-星期四（有氧）"><a href="#2022-04-21-星期四（有氧）" class="headerlink" title="2022-04-21 星期四（有氧）"></a>2022-04-21 星期四（有氧）</h1><h2 id="中午-1"><a href="#中午-1" class="headerlink" title="中午"></a>中午</h2><ul><li>单车30分钟</li></ul><h2 id="晚上-1"><a href="#晚上-1" class="headerlink" title="晚上"></a>晚上</h2><ul><li>杠铃上斜卧推<ul><li>40kg 12 12 12</li><li>45kg 10</li><li>50kg 6 7 6 6</li></ul></li><li>杠铃片前平举10kg 12 12 12</li></ul><h1 id="2022-04-22-星期五（推）"><a href="#2022-04-22-星期五（推）" class="headerlink" title="2022-04-22 星期五（推）"></a>2022-04-22 星期五（推）</h1><ul><li>哑铃平板卧推<ul><li>12kg 15</li><li>16kg 14</li><li>20kg 12 11 10 11</li></ul></li><li>史密斯上斜卧推<ul><li>20kg 9</li><li>30kg 8 6</li></ul></li><li>双杠臂屈伸45kg 11 11 12 12</li><li>蝴蝶机夹胸<ul><li>27kg 9 9</li><li>32kg 6 8</li></ul></li></ul><h1 id="2022-04-24-星期天（有氧）"><a href="#2022-04-24-星期天（有氧）" class="headerlink" title="2022-04-24 星期天（有氧）"></a>2022-04-24 星期天（有氧）</h1><ul><li>坡度快走30分钟</li></ul><h1 id="2022-04-25-星期一（拉）"><a href="#2022-04-25-星期一（拉）" class="headerlink" title="2022-04-25 星期一（拉）"></a>2022-04-25 星期一（拉）</h1><ul><li>宽距引体向上 8 12 9 7</li><li>俯身杠铃划船<ul><li>30kg 14</li><li>50kg 10 12 12</li><li>55kg 12 13 12 12</li></ul></li><li>对握高位下拉39kg 9 8 8 8</li></ul><h1 id="2022-04-26-星期二（推）"><a href="#2022-04-26-星期二（推）" class="headerlink" title="2022-04-26 星期二（推）"></a>2022-04-26 星期二（推）</h1><ul><li>实力推<ul><li>20kg 12</li><li>30kg 6 9 8 8</li></ul></li><li>平板杠铃卧推<ul><li>20kg 13</li><li>40kg 8</li><li>50kg 8 8 8 6</li></ul></li><li>坐姿上斜卧推20kg 6 6 6 5</li><li>器械推胸16.8kg 8</li><li>器械推胸41kg 8 8 8 6</li></ul><h1 id="2022-04-27-星期三（腿）"><a href="#2022-04-27-星期三（腿）" class="headerlink" title="2022-04-27 星期三（腿）"></a>2022-04-27 星期三（腿）</h1><ul><li>深蹲 12</li><li>杠铃深蹲<ul><li>20kg 8</li><li>40kg 8</li><li>60kg 8 8 8 8</li></ul></li><li>传统硬拉<ul><li>60kg 4 8</li><li>80kg 6 5 5</li></ul></li><li>悬垂卷腹 12 12 13 12 12</li></ul><h1 id="2022-04-28-星期四（拉）"><a href="#2022-04-28-星期四（拉）" class="headerlink" title="2022-04-28 星期四（拉）"></a>2022-04-28 星期四（拉）</h1><ul><li>宽距引体向上 7 8 8 8</li><li>俯身杠铃划船<ul><li>30kg 15</li><li>50kg 12</li><li>55kg 13</li><li>60kg 12 12 12 12</li></ul></li><li>坐姿V把划船45kg 10 10 8 8</li><li>重锤高位下拉50kg 8 8 8 8</li><li>牧师曲杆二头弯举15kg 12</li><li>直杆二头弯举20kg 8 7</li><li>曲杆二头弯举20kg 6 6</li><li>蝴蝶机练后束23kg 12 12 12 12</li></ul><h1 id="2022-04-29-星期五（推）"><a href="#2022-04-29-星期五（推）" class="headerlink" title="2022-04-29 星期五（推）"></a>2022-04-29 星期五（推）</h1><ul><li>平板杠铃卧推<ul><li>20kg 15</li><li>40kg 12</li><li>50kg 8 8 6 6</li></ul></li><li>上斜哑铃卧推20kg 8 8 8 8</li><li>上斜哑铃飞鸟8kg 10 10</li><li>坐姿哑铃推举<ul><li>10kg 12</li><li>12kg 10 10 10 10</li></ul></li><li>双杠臂屈伸 7 7 8 7</li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;2022-04-01-星期五（胸）&quot;&gt;&lt;a href=&quot;#2022-04-01-星期五（胸）&quot; class=&quot;headerlink&quot; title=&quot;2022-04-01 星期五（胸）&quot;&gt;&lt;/a&gt;2022-04-01 星期五（胸）&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;平板杠铃
      
    
    </summary>
    
    
      <category term="健身" scheme="https://blog.smilexin.cn/tags/%E5%81%A5%E8%BA%AB/"/>
    
  </entry>
  
  <entry>
    <title>Harbor的使用</title>
    <link href="https://blog.smilexin.cn/2022/03/14/Harbor%E7%9A%84%E4%BD%BF%E7%94%A8.html"/>
    <id>https://blog.smilexin.cn/2022/03/14/Harbor的使用.html</id>
    <published>2022-03-13T16:00:00.000Z</published>
    <updated>2022-03-14T07:48:28.736Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Harbor-是什么？"><a href="#Harbor-是什么？" class="headerlink" title="Harbor 是什么？"></a>Harbor 是什么？</h1><p>Harbor是一个用于存储和分发Docker镜像的企业级Registry服务器，可以用来构建企业内部的Docker镜像仓库。<br>它在Docker的开源项目 Distribution 的基础上，添加了一些企业需要的功能特性，如镜像同步复制、漏洞扫描和权限管理等。</p><blockquote><p>Harbor is an open source trusted cloud native registry project that stores, signs, and scans content. Harbor extends the open source Docker Distribution by adding the functionalities usually required by users such as security, identity and management. Having a registry closer to the build and run environment can improve the image transfer efficiency. Harbor supports replication of images between registries, and also offers advanced security features such as user management, access control and activity auditing.</p></blockquote><p>github地址: <a href="https://github.com/goharbor/harbor" target="_blank" rel="noopener">https://github.com/goharbor/harbor</a></p><h1 id="Live-Demo"><a href="#Live-Demo" class="headerlink" title="Live Demo"></a>Live Demo</h1><p>url: <a href="https://demo.goharbor.io/" target="_blank" rel="noopener">https://demo.goharbor.io/</a><br>user: admin<br>pwd: Harbor12345</p><h1 id="下载Harbor安装包"><a href="#下载Harbor安装包" class="headerlink" title="下载Harbor安装包"></a>下载Harbor安装包</h1><p>下载Harbor最新稳定版本的离线安装包，我这里使用的是 <strong>harbor-offline-installer-v2.5.0-rc1.tgz</strong><br>下载地址：<a href="https://github.com/goharbor/harbor/releases" target="_blank" rel="noopener">https://github.com/goharbor/harbor/releases</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://github.com/goharbor/harbor/releases/download/v2.5.0-rc1/harbor-offline-installer-v2.5.0-rc1.tgz</span><br></pre></td></tr></table></figure></p><p>因为网络原因,我这边使用加速地址下载。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 原地址 </span><br><span class="line">wget https://github.com/goharbor/harbor/releases/download/v2.5.0-rc1/harbor-offline-installer-v2.5.0-rc1.tgz</span><br><span class="line"># 加速下载方法一 </span><br><span class="line">wget https://download.fastgit.org/goharbor/harbor/releases/download/v2.5.0-rc1/harbor-offline-installer-v2.5.0-rc1.tgz</span><br><span class="line"># 加速下载方法二 </span><br><span class="line">wget https://hub.fastgit.org/goharbor/harbor/releases/download/v2.5.0-rc1/harbor-offline-installer-v2.5.0-rc1.tgz</span><br></pre></td></tr></table></figure></p><h1 id="安装docker-compose"><a href="#安装docker-compose" class="headerlink" title="安装docker-compose"></a>安装docker-compose</h1><p>Harbor的安装需要依赖<code>docker-compose</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">wget https://github.com/docker/compose/releases/download/v2.3.3/docker-compose-linux-x86_64</span><br><span class="line">mv docker-compose-linux-x86_64 /usr/local/bin/docker-compose</span><br><span class="line">chmod +x /usr/local/bin/docker-compose</span><br><span class="line">docker-compose --version</span><br></pre></td></tr></table></figure><h1 id="安装Harbor"><a href="#安装Harbor" class="headerlink" title="安装Harbor"></a>安装Harbor</h1><p>解压安装包<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tar -xvf harbor-offline-installer-v2.5.0-rc1.tgz</span><br><span class="line">cd harbor</span><br></pre></td></tr></table></figure></p><p>创建配置文件<code>cp harbor.yml.tmpl harbor.yml</code>并修改相应的配置 <code>vi harbor.yml</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">hostname: 192.168.80.6 # 修改hostname为节点ip地址</span><br><span class="line"></span><br><span class="line"># 不用HTTPS则需要注释所有HTTPS配置</span><br><span class="line">#https:</span><br><span class="line">  # https port for harbor, default is 443</span><br><span class="line">  #port: 443</span><br><span class="line">  # The path of cert and key files for nginx</span><br><span class="line">  #certificate: /your/certificate/path</span><br><span class="line">  #private_key: /your/private/key/path</span><br></pre></td></tr></table></figure><p>执行安装脚本: <code>sh install.sh</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">[root@node-1 harbor]# sh install.sh </span><br><span class="line"></span><br><span class="line">[Step 0]: checking if docker is installed ...</span><br><span class="line"></span><br><span class="line">Note: docker version: 20.10.6</span><br><span class="line"></span><br><span class="line">[Step 1]: checking docker-compose is installed ...</span><br><span class="line"></span><br><span class="line">Note: docker-compose version: 2.3.3</span><br><span class="line"></span><br><span class="line">[Step 2]: loading Harbor images ...</span><br><span class="line">Loaded image: goharbor/chartmuseum-photon:v2.5.0</span><br><span class="line">Loaded image: goharbor/harbor-db:v2.5.0</span><br><span class="line">Loaded image: goharbor/harbor-jobservice:v2.5.0</span><br><span class="line">Loaded image: goharbor/registry-photon:v2.5.0</span><br><span class="line">Loaded image: goharbor/notary-server-photon:v2.5.0</span><br><span class="line">Loaded image: goharbor/prepare:v2.5.0</span><br><span class="line">Loaded image: goharbor/redis-photon:v2.5.0</span><br><span class="line">Loaded image: goharbor/trivy-adapter-photon:v2.5.0</span><br><span class="line">Loaded image: goharbor/harbor-exporter:v2.5.0</span><br><span class="line">Loaded image: goharbor/nginx-photon:v2.5.0</span><br><span class="line">Loaded image: goharbor/notary-signer-photon:v2.5.0</span><br><span class="line">Loaded image: goharbor/harbor-portal:v2.5.0</span><br><span class="line">Loaded image: goharbor/harbor-core:v2.5.0</span><br><span class="line">Loaded image: goharbor/harbor-log:v2.5.0</span><br><span class="line">Loaded image: goharbor/harbor-registryctl:v2.5.0</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[Step 3]: preparing environment ...</span><br><span class="line"></span><br><span class="line">[Step 4]: preparing harbor configs ...</span><br><span class="line">prepare base dir is set to /root/harbor/harbor</span><br><span class="line">WARNING:root:WARNING: HTTP protocol is insecure. Harbor will deprecate http protocol in the future. Please make sure to upgrade to https</span><br><span class="line">Generated configuration file: /config/portal/nginx.conf</span><br><span class="line">Generated configuration file: /config/log/logrotate.conf</span><br><span class="line">Generated configuration file: /config/log/rsyslog_docker.conf</span><br><span class="line">Generated configuration file: /config/nginx/nginx.conf</span><br><span class="line">Generated configuration file: /config/core/env</span><br><span class="line">Generated configuration file: /config/core/app.conf</span><br><span class="line">Generated configuration file: /config/registry/config.yml</span><br><span class="line">Generated configuration file: /config/registryctl/env</span><br><span class="line">Generated configuration file: /config/registryctl/config.yml</span><br><span class="line">Generated configuration file: /config/db/env</span><br><span class="line">Generated configuration file: /config/jobservice/env</span><br><span class="line">Generated configuration file: /config/jobservice/config.yml</span><br><span class="line">Generated and saved secret to file: /data/secret/keys/secretkey</span><br><span class="line">Successfully called func: create_root_cert</span><br><span class="line">Generated configuration file: /compose_location/docker-compose.yml</span><br><span class="line">Clean up the input dir</span><br></pre></td></tr></table></figure><p>到此安装完成，浏览器输入hostname配置的ip即可访问Harbor。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Harbor-是什么？&quot;&gt;&lt;a href=&quot;#Harbor-是什么？&quot; class=&quot;headerlink&quot; title=&quot;Harbor 是什么？&quot;&gt;&lt;/a&gt;Harbor 是什么？&lt;/h1&gt;&lt;p&gt;Harbor是一个用于存储和分发Docker镜像的企业级Regist
      
    
    </summary>
    
    
      <category term="Harbor" scheme="https://blog.smilexin.cn/tags/Harbor/"/>
    
      <category term="容器" scheme="https://blog.smilexin.cn/tags/%E5%AE%B9%E5%99%A8/"/>
    
  </entry>
  
  <entry>
    <title>再见 Docker ！5分钟转型 Containerd !</title>
    <link href="https://blog.smilexin.cn/2022/03/11/%E5%86%8D%E8%A7%81%20Docker%20%EF%BC%815%E5%88%86%E9%92%9F%E8%BD%AC%E5%9E%8B%20Containerd%20!.html"/>
    <id>https://blog.smilexin.cn/2022/03/11/再见 Docker ！5分钟转型 Containerd !.html</id>
    <published>2022-03-10T16:00:00.000Z</published>
    <updated>2022-03-11T02:09:46.135Z</updated>
    
    <content type="html"><![CDATA[<h1 id="摘要"><a href="#摘要" class="headerlink" title="摘要"></a>摘要</h1><p>Docker作为非常流行的容器技术，之前经常有文章说它被K8S弃用了，取而代之的是另一种容器技术Containerd！其实Containerd只是从Docker中分离出来的底层容器运行时，使用起来和Docker并没有啥区别，本文主要介绍下Containerd的使用。</p><h1 id="Containerd-简介"><a href="#Containerd-简介" class="headerlink" title="Containerd 简介"></a>Containerd 简介</h1><p>Containerd是一个工业级标准的容器运行时，它强调简单性、健壮性和可移植性。Containerd可以在宿主机中管理完整的容器生命周期，包括容器镜像的传输和存储、容器的执行和管理、存储和网络等。</p><h1 id="Docker-vs-Containerd"><a href="#Docker-vs-Containerd" class="headerlink" title="Docker vs Containerd"></a>Docker vs Containerd</h1><p>Containerd是从Docker中分离出来的一个项目，可以作为一个底层容器运行时，现在它成了Kubernete容器运行时更好的选择。</p><p>不仅仅是Docker，还有很多云平台也支持Containerd作为底层容器运行时，具体参考下图。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/img/posts/containerd/architecture.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h1 id="K8S-CRI"><a href="#K8S-CRI" class="headerlink" title="K8S CRI"></a>K8S CRI</h1><p>K8S发布CRI（Container Runtime Interface），统一了容器运行时接口，凡是支持CRI的容器运行时，皆可作为K8S的底层容器运行时。</p><p>K8S为什么要放弃使用Docker作为容器运行时，而使用Containerd呢？</p><p>如果你使用Docker作为K8S容器运行时的话，kubelet需要先要通过dockershim去调用Docker，再通过Docker去调用Containerd。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/img/posts/containerd/2.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>如果你使用Containerd作为K8S容器运行时的话，由于Containerd内置了CRI插件，kubelet可以直接调用Containerd。</p><p><img src="/img/posts/containerd/3.png" alt=""></p><p>使用Containerd不仅性能提高了（调用链变短了），而且资源占用也会变小（Docker不是一个纯粹的容器运行时，具有大量其他功能）。</p><h1 id="Containerd使用"><a href="#Containerd使用" class="headerlink" title="Containerd使用"></a>Containerd使用</h1><blockquote><p>如果你之前用过Docker，你只要稍微花5分钟就可以学会Containerd了，接下来我们学习下Containerd的使用。</p></blockquote><p>其实只要把我们之前使用的docker命令改为crictl命令即可操作Containerd。</p><h2 id="查看所有运行中的容器"><a href="#查看所有运行中的容器" class="headerlink" title="查看所有运行中的容器:"></a>查看所有运行中的容器:</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">crictl ps</span><br></pre></td></tr></table></figure><h2 id="查看所有镜像"><a href="#查看所有镜像" class="headerlink" title="查看所有镜像:"></a>查看所有镜像:</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">crictl images</span><br></pre></td></tr></table></figure><h2 id="进入容器内部执行bash命令，这里需要注意的是只能使用容器ID，不支持使用容器名称："><a href="#进入容器内部执行bash命令，这里需要注意的是只能使用容器ID，不支持使用容器名称：" class="headerlink" title="进入容器内部执行bash命令，这里需要注意的是只能使用容器ID，不支持使用容器名称："></a>进入容器内部执行bash命令，这里需要注意的是只能使用容器ID，不支持使用容器名称：</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">crictl exec -it a5e34c24be371 /bin/bash</span><br></pre></td></tr></table></figure><h2 id="查看容器中应用资源占用情况，可以发现占用非常低。"><a href="#查看容器中应用资源占用情况，可以发现占用非常低。" class="headerlink" title="查看容器中应用资源占用情况，可以发现占用非常低。"></a>查看容器中应用资源占用情况，可以发现占用非常低。</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">crictl stats</span><br></pre></td></tr></table></figure><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>从Docker转型Containerd非常简单，基本没有什么门槛。只要把之前Docker命令中的docker改为crictl基本就可以了，果然是同一个公司出品的东西，用法都一样。所以不管K8S到底弃用不弃用Docker，对我们开发者使用来说，基本没啥影响！</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;摘要&quot;&gt;&lt;a href=&quot;#摘要&quot; class=&quot;headerlink&quot; title=&quot;摘要&quot;&gt;&lt;/a&gt;摘要&lt;/h1&gt;&lt;p&gt;Docker作为非常流行的容器技术，之前经常有文章说它被K8S弃用了，取而代之的是另一种容器技术Containerd！其实Container
      
    
    </summary>
    
    
      <category term="容器" scheme="https://blog.smilexin.cn/tags/%E5%AE%B9%E5%99%A8/"/>
    
      <category term="Containerd" scheme="https://blog.smilexin.cn/tags/Containerd/"/>
    
      <category term="docker" scheme="https://blog.smilexin.cn/tags/docker/"/>
    
  </entry>
  
  <entry>
    <title>安装使用Containerd</title>
    <link href="https://blog.smilexin.cn/2022/03/11/%E5%AE%89%E8%A3%85%E4%BD%BF%E7%94%A8Containerd.html"/>
    <id>https://blog.smilexin.cn/2022/03/11/安装使用Containerd.html</id>
    <published>2022-03-10T16:00:00.000Z</published>
    <updated>2022-03-11T02:31:15.481Z</updated>
    
    <summary type="html">
    
    </summary>
    
    
      <category term="容器" scheme="https://blog.smilexin.cn/tags/%E5%AE%B9%E5%99%A8/"/>
    
      <category term="Containerd" scheme="https://blog.smilexin.cn/tags/Containerd/"/>
    
  </entry>
  
  <entry>
    <title>健身记录_202203</title>
    <link href="https://blog.smilexin.cn/2022/03/01/%E5%81%A5%E8%BA%AB%E8%AE%B0%E5%BD%95_202203.html"/>
    <id>https://blog.smilexin.cn/2022/03/01/健身记录_202203.html</id>
    <published>2022-02-28T16:00:00.000Z</published>
    <updated>2022-03-31T06:10:25.507Z</updated>
    
    <content type="html"><![CDATA[<h1 id="2022-03-01-星期二（胸）"><a href="#2022-03-01-星期二（胸）" class="headerlink" title="2022-03-01 星期二（胸）"></a>2022-03-01 星期二（胸）</h1><ul><li>平板杠铃卧推<ul><li>20kg 12</li><li>40kg 12</li><li>55kg 5 5 4 2 3</li></ul></li><li>上斜哑铃卧推22kg 5 5 6 5</li><li>器械推胸26.8kg 6 6 4 4</li><li>双杠臂屈伸41kg 8 8 8 8 9</li></ul><h1 id="2022-03-04-星期五（背）"><a href="#2022-03-04-星期五（背）" class="headerlink" title="2022-03-04 星期五（背）"></a>2022-03-04 星期五（背）</h1><ul><li>辅助引体向上14kg 8 8 7 6 5</li><li>单臂划船40kg 6 6 6 6</li><li>重锤下拉65kg 5.6 6 6 6</li><li>窄距对握高位下拉<ul><li>45kg 3</li><li>39kg 5</li></ul></li></ul><h1 id="2022-03-05-星期六（硬拉）"><a href="#2022-03-05-星期六（硬拉）" class="headerlink" title="2022-03-05 星期六（硬拉）"></a>2022-03-05 星期六（硬拉）</h1><ul><li>罗马尼亚硬拉<ul><li>20kg 12</li><li>40kg 8 8 6</li><li>50kg 6 8</li></ul></li><li>传统硬拉75kg 5 5 5 5</li></ul><h1 id="2022-03-08-星期二（胸）"><a href="#2022-03-08-星期二（胸）" class="headerlink" title="2022-03-08 星期二（胸）"></a>2022-03-08 星期二（胸）</h1><ul><li>平板杠铃卧推<ul><li>20kg 12</li><li>40kg 8 8</li><li>50kg 6 6 7 7</li></ul></li><li>史密斯上斜卧推30kg 6 6 6 5 4</li><li>器械推胸21.8kg 5.6 6 6 4.4</li><li>双杠臂屈伸41kg 8 8 8 8</li></ul><h1 id="2022-03-09-星期三（有氧）"><a href="#2022-03-09-星期三（有氧）" class="headerlink" title="2022-03-09 星期三（有氧）"></a>2022-03-09 星期三（有氧）</h1><ul><li>坡度快走40分钟</li></ul><h1 id="2022-03-10-星期四（背）"><a href="#2022-03-10-星期四（背）" class="headerlink" title="2022-03-10 星期四（背）"></a>2022-03-10 星期四（背）</h1><ul><li>宽距引体向上 7 9 8 7</li><li>单臂划船40kg 6 6 6 6</li><li>重锤下拉65kg 3 6 6 7 6</li><li>窄距对握高位下拉39kg 6 6 6 5</li></ul><h1 id="2022-03-11-星期五（硬拉）"><a href="#2022-03-11-星期五（硬拉）" class="headerlink" title="2022-03-11 星期五（硬拉）"></a>2022-03-11 星期五（硬拉）</h1><ul><li>罗马尼亚硬拉<ul><li>20kg 12</li><li>40kg 8 7 8 8</li></ul></li><li>传统硬拉80kg 3 5 5 6</li><li>坡度快走30分钟</li></ul><h1 id="2022-03-14-星期一（有氧）"><a href="#2022-03-14-星期一（有氧）" class="headerlink" title="2022-03-14 星期一（有氧）"></a>2022-03-14 星期一（有氧）</h1><ul><li>坡度快走40分钟</li></ul><h1 id="2022-03-15-星期二（胸）"><a href="#2022-03-15-星期二（胸）" class="headerlink" title="2022-03-15 星期二（胸）"></a>2022-03-15 星期二（胸）</h1><ul><li>平板杠铃卧推<ul><li>20kg 13</li><li>40kg 8 8</li><li>50kg 6 5 4 4</li></ul></li><li>哑铃上斜卧推22kg 5 6 5 4</li><li>双杠臂屈伸41kg 8 8 8 8</li><li>悬垂抬腿 14 10 13 13</li></ul><h1 id="2022-03-16-星期三（背）"><a href="#2022-03-16-星期三（背）" class="headerlink" title="2022-03-16 星期三（背）"></a>2022-03-16 星期三（背）</h1><ul><li>宽距引体向上 6 8 8 6.6</li><li>窄距对握器械划船45kg 8 8 8 8</li><li>重锤下拉60kg 6 6 7 8</li></ul><h1 id="2022-03-17-星期四（硬拉）"><a href="#2022-03-17-星期四（硬拉）" class="headerlink" title="2022-03-17 星期四（硬拉）"></a>2022-03-17 星期四（硬拉）</h1><ul><li>罗马尼亚硬拉<ul><li>20kg 14</li><li>40kg 8 8 9 8</li></ul></li><li>传统硬拉80kg 5 5 5 5</li></ul><h1 id="2022-03-18-星期五（肩）"><a href="#2022-03-18-星期五（肩）" class="headerlink" title="2022-03-18 星期五（肩）"></a>2022-03-18 星期五（肩）</h1><ul><li>实力推<ul><li>20kg 9 </li><li>25kg 8</li><li>30kg 8 7 8 8</li></ul></li><li>坐姿哑铃推举20kg 6 6 6 5</li><li>哑铃侧平举10kg 9 10 11 9</li><li>绳索面拉32kg 10 10 10 10</li></ul><h1 id="2022-03-19-星期六（二头）"><a href="#2022-03-19-星期六（二头）" class="headerlink" title="2022-03-19 星期六（二头）"></a>2022-03-19 星期六（二头）</h1><ul><li>杠铃弯举18kg 8 9 10 8 10 10 10 10 10 10 9 8</li></ul><h1 id="2022-03-21-星期一（胸）"><a href="#2022-03-21-星期一（胸）" class="headerlink" title="2022-03-21 星期一（胸）"></a>2022-03-21 星期一（胸）</h1><ul><li>平板杠铃卧推<ul><li>20kg 12</li><li>40kg 9 8</li><li>50kg 5 5 5 5</li></ul></li><li>器械推胸26.8kg 6 6 5.5 6</li><li>蝴蝶机夹胸32kg 8 6 8</li></ul><h1 id="2022-03-22-星期二（背）"><a href="#2022-03-22-星期二（背）" class="headerlink" title="2022-03-22 星期二（背）"></a>2022-03-22 星期二（背）</h1><ul><li>宽距引体向上 7 6 7 6</li><li>单臂划船<ul><li>30kg 6</li><li>35kg 8 8 8 8</li></ul></li><li>重锤下拉<ul><li>50kg 8</li><li>55kg 6 8 8 8</li></ul></li></ul><h1 id="2022-03-23-星期三（硬拉）"><a href="#2022-03-23-星期三（硬拉）" class="headerlink" title="2022-03-23 星期三（硬拉）"></a>2022-03-23 星期三（硬拉）</h1><ul><li>罗马尼亚硬拉<ul><li>20kg 14 </li><li>40kg 8 9</li><li>45kg 9 9 9 9</li></ul></li><li>传统硬拉<ul><li>60kg 5 </li><li>80kg 5 5 5 5</li></ul></li></ul><h1 id="2022-03-24-星期四（有氧）"><a href="#2022-03-24-星期四（有氧）" class="headerlink" title="2022-03-24 星期四（有氧）"></a>2022-03-24 星期四（有氧）</h1><ul><li>坡度快走20分钟</li><li>爬楼机20分钟</li></ul><h1 id="2022-03-25-星期五（胸）"><a href="#2022-03-25-星期五（胸）" class="headerlink" title="2022-03-25 星期五（胸）"></a>2022-03-25 星期五（胸）</h1><ul><li>哑铃上斜卧推<ul><li>10kg 12</li><li>20kg 8</li><li>22kg 8 8 8 8</li></ul></li><li>平板杠铃卧推40kg 5 8 8</li><li>器械推胸<ul><li>21.8kg 8 9</li><li>26.8kg 6 5.2 4.5 4.5</li></ul></li><li>双杠臂屈伸41kg 8 8 8 8</li></ul><h1 id="2022-03-26-星期六（xjbl）"><a href="#2022-03-26-星期六（xjbl）" class="headerlink" title="2022-03-26 星期六（xjbl）"></a>2022-03-26 星期六（xjbl）</h1><ul><li>引体向上 8</li><li>杠铃弯举18kg 9 8 10 9 8 11</li></ul><h1 id="2022-03-28-星期一（背）"><a href="#2022-03-28-星期一（背）" class="headerlink" title="2022-03-28 星期一（背）"></a>2022-03-28 星期一（背）</h1><ul><li>引体向上 8 6 8 6</li><li>器械划船68kg 6 6 6 6 6</li><li>重锤下拉55kg 8 8 8 8</li><li>曲杆杠铃弯举25kg 6 6 6 7</li><li>单臂哑铃交替弯举<ul><li>10kg 6</li><li>8kg 16 14 16</li></ul></li></ul><h1 id="2022-03-29-星期二（胸）"><a href="#2022-03-29-星期二（胸）" class="headerlink" title="2022-03-29 星期二（胸）"></a>2022-03-29 星期二（胸）</h1><ul><li>平板杠铃卧推<ul><li>20kg 15</li><li>40kg 12</li><li>55kg 3</li><li>52.5kg 5 5 5</li></ul></li><li>哑铃上斜卧推22kg 6 6 6 6</li><li>双杠臂屈伸50kg 11 12 12 12</li><li>史密斯窄距卧推<ul><li>20kg 9</li><li>25kg 6 6 5 5</li></ul></li></ul><h1 id="2022-03-30-星期三（硬拉）"><a href="#2022-03-30-星期三（硬拉）" class="headerlink" title="2022-03-30 星期三（硬拉）"></a>2022-03-30 星期三（硬拉）</h1><ul><li>罗马尼亚硬拉<ul><li>20kg 14 </li><li>40kg 10</li><li>50kg 8 8 9 8</li></ul></li><li>传统硬拉80kg 5 5 5 5 5</li></ul><h1 id="2022-03-31-星期四（背）"><a href="#2022-03-31-星期四（背）" class="headerlink" title="2022-03-31 星期四（背）"></a>2022-03-31 星期四（背）</h1><ul><li>实力推20kg 8</li><li>单臂划船<ul><li>15kg 10</li><li>35kg 6</li><li>40kg 6 6 6 6</li></ul></li><li>重锤高位下拉55kg 8 8 8 8</li><li>窄距对握划船<ul><li>39kg 10</li><li>52kg 7 7 8 8</li></ul></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;2022-03-01-星期二（胸）&quot;&gt;&lt;a href=&quot;#2022-03-01-星期二（胸）&quot; class=&quot;headerlink&quot; title=&quot;2022-03-01 星期二（胸）&quot;&gt;&lt;/a&gt;2022-03-01 星期二（胸）&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;平板杠铃
      
    
    </summary>
    
    
      <category term="健身" scheme="https://blog.smilexin.cn/tags/%E5%81%A5%E8%BA%AB/"/>
    
  </entry>
  
  <entry>
    <title>ffmpeg常用命令</title>
    <link href="https://blog.smilexin.cn/2022/02/24/ffmpeg%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4.html"/>
    <id>https://blog.smilexin.cn/2022/02/24/ffmpeg常用命令.html</id>
    <published>2022-02-23T16:00:00.000Z</published>
    <updated>2022-02-24T09:10:53.739Z</updated>
    
    <content type="html"><![CDATA[<h1 id="视频转换"><a href="#视频转换" class="headerlink" title="视频转换"></a>视频转换</h1><p>比如一个avi文件，想转为mp4，或者一个mp4想转为ts。<br><code>ffmpeg -i input.avi output.mp4</code><br><code>ffmpeg -i input.mp4 output.ts</code></p><h1 id="提取视频音频"><a href="#提取视频音频" class="headerlink" title="提取视频音频"></a>提取视频音频</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 提取完整音频，默认mp4的audio codec是aac,如果不是，可以都转为最常见的aac。</span><br><span class="line">ffmpeg -i test.mp4 -acodec copy -vn output.aac</span><br><span class="line"># 输出mp3</span><br><span class="line">ffmpeg -i test.mp4 -f mp3 -vn test.mp3</span><br><span class="line"># 输出指定时间段的音频</span><br><span class="line">ffmpeg -i mmgw2018_01.mp4 -ss 00:03:45 -t 00:00:45.0 -acodec copy -vn output.aac</span><br></pre></td></tr></table></figure><ul><li><code>-i</code> 表示input，即输入文件</li><li><code>-f</code> 表示format，即输出格式</li><li><code>-vn</code> 表示vedio not，即输出不包含视频</li><li><code>acodec copy</code> 使用已经在那里相同的音频流。</li><li><code>ss</code> 选项指定开始时间戳，使用 <code>t</code> 选项指定编码持续时间，例如从3分钟45秒钟开始，持续45秒。时间戳必须采用 <code>hh:mm:ss.xxx</code> 格式或以秒为单位，如果你不指定 <code>t</code> 选项，它将会结束。</li></ul><h1 id="提取视频"><a href="#提取视频" class="headerlink" title="提取视频"></a>提取视频</h1><p><code>ffmpeg -i input.mp4 -vcodec copy -an output.mp4</code></p><h1 id="视频剪切"><a href="#视频剪切" class="headerlink" title="视频剪切"></a>视频剪切</h1><p>下面的命令，可以从时间为00:00:15开始，截取5秒钟的视频。<br><code>ffmpeg -ss 00:00:15 -t 00:00:05 -i input.mp4 -vcodec copy -acodec copy output.mp4</code><br>-ss表示开始切割的时间，-t表示要切多少。上面就是从15秒开始，切5秒钟出来。</p><h1 id="码率控制"><a href="#码率控制" class="headerlink" title="码率控制"></a>码率控制</h1><p>码率控制对于在线视频比较重要。因为在线视频需要考虑其能提供的带宽。</p><p>那么，什么是码率？很简单：<br>bitrate = file size / duration<br>比如一个文件20.8M，时长1分钟，那么，码率就是：<br>biterate = 20.8M bit/60s = 20.8<em>1024</em>1024*8 bit/60s= 2831Kbps<br>一般音频的码率只有固定几种，比如是128Kbps，<br>那么，video的就是<br>video biterate = 2831Kbps -128Kbps = 2703Kbps。</p><p>那么ffmpeg如何控制码率。<br>ffmpg控制码率有3种选择，-minrate -b:v -maxrate<br>-b:v主要是控制平均码率。<br>比如一个视频源的码率太高了，有10Mbps，文件太大，想把文件弄小一点，但是又不破坏分辨率。<br>ffmpeg -i input.mp4 -b:v 2000k output.mp4<br>上面把码率从原码率转成2Mbps码率，这样其实也间接让文件变小了。目测接近一半。<br>不过，ffmpeg官方wiki比较建议，设置b:v时，同时加上 -bufsize<br>-bufsize 用于设置码率控制缓冲器的大小，设置的好处是，让整体的码率更趋近于希望的值，减少波动。（简单来说，比如1 2的平均值是1.5， 1.49 1.51 也是1.5, 当然是第二种比较好）</p><p><code>ffmpeg -i input.mp4 -b:v 2000k -bufsize 2000k output.mp4</code></p><p><code>-minrate -maxrate</code>就简单了，在线视频有时候，希望码率波动，不要超过一个阈值，可以设置maxrate。<br><code>ffmpeg -i input.mp4 -b:v 2000k -bufsize 2000k -maxrate 2500k output.mp4</code></p><h1 id="视频编码格式转换"><a href="#视频编码格式转换" class="headerlink" title="视频编码格式转换"></a>视频编码格式转换</h1><p>比如一个视频的编码是MPEG4，想用H264编码，咋办？<br><code>ffmpeg -i input.mp4 -vcodec h264 output.mp4</code><br>相反也一样<br><code>ffmpeg -i input.mp4 -vcodec mpeg4 output.mp4</code></p><p>当然了，如果ffmpeg当时编译时，添加了外部的x265或者X264，那也可以用外部的编码器来编码。（不知道什么是X265，可以 Google一下，简单的说，就是她不包含在ffmpeg的源码里，是独立的一个开源代码，用于编码HEVC，ffmpeg编码时可以调用它。当然 了，ffmpeg自己也有编码器）<br><code>ffmpeg -i input.mp4 -c:v libx265 output.mp4</code><br><code>ffmpeg -i input.mp4 -c:v libx264 output.mp4</code></p><h1 id="只提取视频ES数据"><a href="#只提取视频ES数据" class="headerlink" title="只提取视频ES数据"></a>只提取视频ES数据</h1><p><code>ffmpeg –i input.mp4 –vcodec copy –an –f m4v output.h264</code></p><h1 id="过滤器的使用"><a href="#过滤器的使用" class="headerlink" title="过滤器的使用"></a>过滤器的使用</h1><h2 id="将输入的1920x1080缩小到960x540输出"><a href="#将输入的1920x1080缩小到960x540输出" class="headerlink" title="将输入的1920x1080缩小到960x540输出:"></a>将输入的1920x1080缩小到960x540输出:</h2><p><code>ffmpeg -i input.mp4 -vf scale=960:540 output.mp4</code></p><blockquote><p>ps: 如果540不写，写成-1，即scale=960:-1, 那也是可以的，ffmpeg会通知缩放滤镜在输出时保持原始的宽高比。</p></blockquote><h2 id="为视频添加水印logo"><a href="#为视频添加水印logo" class="headerlink" title="为视频添加水印logo"></a>为视频添加水印logo</h2><p>比如，我有这么一个图片 <code>iQIYI_logo.png</code></p><p>想要贴到一个视频上，那可以用如下命令：<br>左上角：<br><code>./ffmpeg -i input.mp4 -i iQIYI_logo.png -filter_complex overlay output.mp4</code><br>右上角：<br><code>./ffmpeg -i input.mp4 -i logo.png -filter_complex overlay=W-w output.mp4</code><br>左下角：<br><code>./ffmpeg -i input.mp4 -i logo.png -filter_complex overlay=0:H-h output.mp4</code><br>右下角：<br><code>./ffmpeg -i input.mp4 -i logo.png -filter_complex overlay=W-w:H-h output.mp4</code></p><h2 id="去掉视频的logo"><a href="#去掉视频的logo" class="headerlink" title="去掉视频的logo"></a>去掉视频的logo</h2><p>语法：-vf delogo=x:y:w:h[:t[:show]]<br>x:y 离左上角的坐标<br>w:h logo的宽和高<br>t: 矩形边缘的厚度默认值4<br>show：若设置为1有一个绿色的矩形，默认值0。</p><p><code>ffmpeg -i input.mp4 -vf delogo=0:0:220:90:100:1 output.mp4</code></p><h1 id="截取视频图像"><a href="#截取视频图像" class="headerlink" title="截取视频图像"></a>截取视频图像</h1><p><code>ffmpeg -i input.mp4 -r 1 -q:v 2 -f image2 pic-%03d.jpeg</code><br>-r 表示每一秒几帧<br>-q:v表示存储jpeg的图像质量，一般2是高质量。<br>如此，ffmpeg会把input.mp4，每隔一秒，存一张图片下来。假设有60s，那会有60张。</p><p>可以设置开始的时间，和你想要截取的时间。<br><code>ffmpeg -i input.mp4 -ss 00:00:20 -t 10 -r 1 -q:v 2 -f image2 pic-%03d.jpeg</code><br><code>-ss</code> 表示开始时间<br><code>-t</code> 表示共要多少时间。<br>如此，ffmpeg会从input.mp4的第20s时间开始，往下10s，即20~30s这10秒钟之间，每隔1s就抓一帧，总共会抓10帧。</p><blockquote><p>参考博文：<a href="https://www.cnblogs.com/frost-yen/p/5848781.html" target="_blank" rel="noopener">https://www.cnblogs.com/frost-yen/p/5848781.html</a></p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;视频转换&quot;&gt;&lt;a href=&quot;#视频转换&quot; class=&quot;headerlink&quot; title=&quot;视频转换&quot;&gt;&lt;/a&gt;视频转换&lt;/h1&gt;&lt;p&gt;比如一个avi文件，想转为mp4，或者一个mp4想转为ts。&lt;br&gt;&lt;code&gt;ffmpeg -i input.avi ou
      
    
    </summary>
    
    
      <category term="ffmpeg" scheme="https://blog.smilexin.cn/tags/ffmpeg/"/>
    
  </entry>
  
  <entry>
    <title>ffmpeg录制rtsp视频流</title>
    <link href="https://blog.smilexin.cn/2022/02/22/ffmpeg%E5%BD%95%E5%88%B6rtsp%E8%A7%86%E9%A2%91%E6%B5%81.html"/>
    <id>https://blog.smilexin.cn/2022/02/22/ffmpeg录制rtsp视频流.html</id>
    <published>2022-02-21T16:00:00.000Z</published>
    <updated>2022-02-22T07:57:28.692Z</updated>
    
    <content type="html"><![CDATA[<p>需要先安装ffmpeg，网上教程很多，自行百度</p><h1 id="录制rtsp视频流"><a href="#录制rtsp视频流" class="headerlink" title="录制rtsp视频流"></a>录制rtsp视频流</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg -i rtsp://admin:admin@192.168.1.100:554 -vcodec copy out.mp4</span><br><span class="line">./ffmpeg.exe -stimeout 5000000 -rtsp_transport tcp -i &quot;rtsp://101.71.97.174:554/openUrl/xmbcbFm?beginTime=20220217T191605&amp;endTime=20220217T191749&amp;playBackMode=1&quot; -vcodec copy  2.mp4</span><br></pre></td></tr></table></figure><p><code>-rtsp_transport tcp</code> 强制使用tcp方式读取rtsp流，如果不加这个则使用UDP方式，UDP方式容易丢帧或出现画面撕裂或者马赛克现象。</p><p><code>-vcodec copy</code> 按照rtsp流中视频原本的编码格式来保存。</p><p><code>-rw_timeout</code> 设置流超时时间，单位为微秒。 5秒(s) = 5000000微秒(μs)</p><blockquote><p>这是官方描述：<br>-rw_timeout        <int64>      ED……. Timeout for IO operations (in microseconds) (from 0 to I64_MAX) (default 0)</int64></p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;需要先安装ffmpeg，网上教程很多，自行百度&lt;/p&gt;
&lt;h1 id=&quot;录制rtsp视频流&quot;&gt;&lt;a href=&quot;#录制rtsp视频流&quot; class=&quot;headerlink&quot; title=&quot;录制rtsp视频流&quot;&gt;&lt;/a&gt;录制rtsp视频流&lt;/h1&gt;&lt;figure class=
      
    
    </summary>
    
    
      <category term="ffmpeg" scheme="https://blog.smilexin.cn/tags/ffmpeg/"/>
    
  </entry>
  
  <entry>
    <title>ffmpeg合并本地线上m3u8格式视频并转mp4格式命令</title>
    <link href="https://blog.smilexin.cn/2022/02/07/ffmpeg%E5%90%88%E5%B9%B6%E6%9C%AC%E5%9C%B0%E7%BA%BF%E4%B8%8Am3u8%E6%A0%BC%E5%BC%8F%E8%A7%86%E9%A2%91%E5%B9%B6%E8%BD%ACmp4%E6%A0%BC%E5%BC%8F%E5%91%BD%E4%BB%A4.html"/>
    <id>https://blog.smilexin.cn/2022/02/07/ffmpeg合并本地线上m3u8格式视频并转mp4格式命令.html</id>
    <published>2022-02-06T16:00:00.000Z</published>
    <updated>2022-02-07T07:26:18.071Z</updated>
    
    <content type="html"><![CDATA[<p>需要先安装ffmpeg，网上教程很多，自行百度</p><h1 id="本地合并"><a href="#本地合并" class="headerlink" title="本地合并"></a>本地合并</h1><p>首先将m3u8的文件路径改为相对路径（根据情况而定，路径不对的情况下）<br>1.cd到m3u8文件目录下<br>2.执行命令<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg -allowed_extensions ALL -protocol_whitelist &quot;file,http,crypto,tcp&quot; -i index.m3u8 -c copy a.mp4</span><br></pre></td></tr></table></figure></p><p><code>index.m3u8</code> 为m3u8文件名<br><code>a.mp4</code> 为合并后的文件名</p><h1 id="HTTP下载合并"><a href="#HTTP下载合并" class="headerlink" title="HTTP下载合并"></a>HTTP下载合并</h1><p>执行命令<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg -i https://xxx.com/index.m3u8 -c copy a.mp4</span><br></pre></td></tr></table></figure></p><p><code>https://xxx.com/index.m3u8</code> 为m3u8文件路径<br><code>a.mp4</code> 为合并后的文件名</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;需要先安装ffmpeg，网上教程很多，自行百度&lt;/p&gt;
&lt;h1 id=&quot;本地合并&quot;&gt;&lt;a href=&quot;#本地合并&quot; class=&quot;headerlink&quot; title=&quot;本地合并&quot;&gt;&lt;/a&gt;本地合并&lt;/h1&gt;&lt;p&gt;首先将m3u8的文件路径改为相对路径（根据情况而定，路径不对的
      
    
    </summary>
    
    
      <category term="ffmpeg" scheme="https://blog.smilexin.cn/tags/ffmpeg/"/>
    
  </entry>
  
  <entry>
    <title>健身记录_202202</title>
    <link href="https://blog.smilexin.cn/2022/01/26/%E5%81%A5%E8%BA%AB%E8%AE%B0%E5%BD%95_202202.html"/>
    <id>https://blog.smilexin.cn/2022/01/26/健身记录_202202.html</id>
    <published>2022-01-25T16:00:00.000Z</published>
    <updated>2022-02-28T10:09:41.572Z</updated>
    
    <content type="html"><![CDATA[<h1 id="2022-02-04"><a href="#2022-02-04" class="headerlink" title="2022-02-04"></a>2022-02-04</h1><p>俯卧撑 20 20 20 22 23 22 25 25</p><h1 id="2022-02-08-星期二（胸）"><a href="#2022-02-08-星期二（胸）" class="headerlink" title="2022-02-08 星期二（胸）"></a>2022-02-08 星期二（胸）</h1><ul><li>平板杠铃卧推<ul><li>20kg 20</li><li>40kg 12</li><li>50kg 6 </li><li>55kg 3 3 3</li><li>52.5kg 5</li></ul></li><li>上斜哑铃卧推22kg 6 6 6 6</li><li>器械推胸<ul><li>21.8kg 8</li><li>26.8kg 4 4 3</li></ul></li><li>双杠臂屈伸41kg 7 8 8 8</li></ul><h1 id="2022-02-10-星期四（背）"><a href="#2022-02-10-星期四（背）" class="headerlink" title="2022-02-10 星期四（背）"></a>2022-02-10 星期四（背）</h1><ul><li>引体向上14kg 6 6 6 6</li><li>器械划船68kg 6 6 6 6</li><li>单臂划船37.5kg 6 6 6 6</li><li>重锤下拉55kg 6 6 6 6</li></ul><h1 id="2022-02-11-星期五（腿）"><a href="#2022-02-11-星期五（腿）" class="headerlink" title="2022-02-11 星期五（腿）"></a>2022-02-11 星期五（腿）</h1><ul><li>杠铃深蹲<ul><li>20kg 8</li><li>40kg 8</li><li>50kg 8</li><li>60kg 6 6 6 5</li></ul></li><li>传统硬拉<ul><li>60kg 5 5</li><li>70kg 4 4</li></ul></li></ul><h1 id="2022-02-14-星期一（胸）"><a href="#2022-02-14-星期一（胸）" class="headerlink" title="2022-02-14 星期一（胸）"></a>2022-02-14 星期一（胸）</h1><ul><li>平板杠铃卧推<ul><li>20kg 20</li><li>40kg 12</li><li>55kg 4 4 4 3</li><li>50kg 6</li></ul></li><li>器械推下胸<ul><li>45kg 8</li><li>54kg 5 4 4 3</li></ul></li><li>上斜哑铃卧推<ul><li>22kg 4 4 3</li><li>20kg 4</li></ul></li><li>双杠臂屈伸41kg 7 6 6 6</li></ul><h1 id="2022-02-16-星期三（背）"><a href="#2022-02-16-星期三（背）" class="headerlink" title="2022-02-16 星期三（背）"></a>2022-02-16 星期三（背）</h1><ul><li>引体向上14kg 6 6 6 6</li><li>器械划船68kg 6 6 6 6</li><li>单臂划船40kg 6 6 6 6</li><li>窄距对握高位下拉<ul><li>39kg 7</li><li>45kg 5.8 5.5 4.7 4.7</li></ul></li><li>曲杆二头弯举20kg 8 8 9 8 8 5</li></ul><h1 id="2022-02-17-星期四（硬拉）"><a href="#2022-02-17-星期四（硬拉）" class="headerlink" title="2022-02-17 星期四（硬拉）"></a>2022-02-17 星期四（硬拉）</h1><ul><li>传统硬拉<ul><li>40kg 6 8</li><li>70kg 5 5 5</li><li>75kg 5 4</li></ul></li></ul><h1 id="2022-02-18-星期五（有氧-肩）"><a href="#2022-02-18-星期五（有氧-肩）" class="headerlink" title="2022-02-18 星期五（有氧+肩）"></a>2022-02-18 星期五（有氧+肩）</h1><ul><li>坡度快走20分钟</li><li>器械推肩<ul><li>23kg 10</li><li>32kg 6 7 8 8</li><li>36kg 2</li></ul></li></ul><h1 id="2022-02-20-星期天（胸）"><a href="#2022-02-20-星期天（胸）" class="headerlink" title="2022-02-20 星期天（胸）"></a>2022-02-20 星期天（胸）</h1><ul><li>平板杠铃卧推<ul><li>20kg 20</li><li>40kg 10 12</li><li>50kg 6 6 5 5</li></ul></li><li>上斜哑铃卧推22kg 5 5 6 5</li><li>器械推胸21.8kg 6 6 6 6</li><li>双杠臂屈伸41kg 6 8 7 7 6</li><li>指扣引体向上 7 5 5 4</li></ul><h1 id="2022-02-21-星期一（背）"><a href="#2022-02-21-星期一（背）" class="headerlink" title="2022-02-21 星期一（背）"></a>2022-02-21 星期一（背）</h1><ul><li>器械划船<ul><li>36kg 9</li><li>68kg 6 6 6 6</li></ul></li><li>引体向上14kg 2</li><li>重锤下拉60kg 6 6 6 7</li><li>单臂划船40kg 6 6 6 6</li><li>曲杆二头弯举<ul><li>20kg 9</li><li>25kg 6 6 6 6</li></ul></li><li><p>对握引体向上（二头） 2</p></li><li><p>罗马尼亚硬拉</p><ul><li>20kg 12</li><li>30kg 15</li><li>40kg 10 10 10 10</li></ul></li></ul><h1 id="2022-02-22-星期二（腿）"><a href="#2022-02-22-星期二（腿）" class="headerlink" title="2022-02-22 星期二（腿）"></a>2022-02-22 星期二（腿）</h1><ul><li>罗马尼亚硬拉<ul><li>20kg 9</li><li>40kg 8 9 9 8</li></ul></li><li>传统硬拉80kg 3 3 4 4</li><li>杠铃深蹲<ul><li>40kg 8</li><li>60kg 6 6 6 6</li></ul></li></ul><h2 id="晚上"><a href="#晚上" class="headerlink" title="晚上"></a>晚上</h2><ul><li>臂力器<ul><li>30kg 12</li><li>50kg 1</li><li>40kg 8 12 12 13 12</li></ul></li></ul><h1 id="2022-02-23-星期三（肩）"><a href="#2022-02-23-星期三（肩）" class="headerlink" title="2022-02-23 星期三（肩）"></a>2022-02-23 星期三（肩）</h1><ul><li>蝴蝶机后束32kg 8 8 8 8</li><li>坐姿哑铃推举<ul><li>14kg 12</li><li>18kg 8</li><li>20kg 6 6 8 8</li></ul></li><li>器械坐姿推举<ul><li>15.4kg 8</li><li>20.4kg 6 7 6 5</li></ul></li><li>哑铃侧平举<ul><li>12kg 8 9 8</li><li>10kg 10</li></ul></li></ul><h1 id="2022-02-24-星期四（胸）"><a href="#2022-02-24-星期四（胸）" class="headerlink" title="2022-02-24 星期四（胸）"></a>2022-02-24 星期四（胸）</h1><ul><li>平板杠铃卧推<ul><li>20kg 12</li><li>40kg 10 8</li><li>50kg 5</li><li>55kg 4.8 5 4 4</li></ul></li><li>上斜哑铃卧推22kg 5 5 5 5</li><li>器械推胸<ul><li>21.8kg 8</li><li>24.3kg 6 6 6 5</li></ul></li><li>双杠臂屈伸50kg 9 9 9 10</li></ul><h1 id="2022-02-25-星期五（背）"><a href="#2022-02-25-星期五（背）" class="headerlink" title="2022-02-25 星期五（背）"></a>2022-02-25 星期五（背）</h1><ul><li>辅助引体向上14kg 6 8 6 6</li><li>器械划船68kg 5 6 6 6</li><li>重锤下拉65kg 6 6 6 6</li><li>窄距对握高位下拉<ul><li>32kg 8</li><li>39kg 8 8</li><li>45kg 6 6 6</li></ul></li></ul><h1 id="2022-02-28-星期一（有氧）"><a href="#2022-02-28-星期一（有氧）" class="headerlink" title="2022-02-28 星期一（有氧）"></a>2022-02-28 星期一（有氧）</h1><ul><li>指扣引体向上 10</li><li>坡度快走40分钟</li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;2022-02-04&quot;&gt;&lt;a href=&quot;#2022-02-04&quot; class=&quot;headerlink&quot; title=&quot;2022-02-04&quot;&gt;&lt;/a&gt;2022-02-04&lt;/h1&gt;&lt;p&gt;俯卧撑 20 20 20 22 23 22 25 25&lt;/p&gt;
&lt;h1 id
      
    
    </summary>
    
    
      <category term="健身" scheme="https://blog.smilexin.cn/tags/%E5%81%A5%E8%BA%AB/"/>
    
  </entry>
  
  <entry>
    <title>Log4j核弹级漏洞到底怎么回事？</title>
    <link href="https://blog.smilexin.cn/2021/12/13/Log4j%E6%A0%B8%E5%BC%B9%E7%BA%A7%E6%BC%8F%E6%B4%9E%E5%88%B0%E5%BA%95%E6%80%8E%E4%B9%88%E5%9B%9E%E4%BA%8B%EF%BC%9F.html"/>
    <id>https://blog.smilexin.cn/2021/12/13/Log4j核弹级漏洞到底怎么回事？.html</id>
    <published>2021-12-12T16:00:00.000Z</published>
    <updated>2021-12-14T02:29:30.728Z</updated>
    
    <content type="html"><![CDATA[<p>相信大家这两天应该被这么一条新闻刷屏了吧：</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/img/posts/log4j/bug_news.png" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><font color="red" size="7">这个漏洞到底是怎么回事？</font><br><font color="red" size="7">核弹级，真的有那么厉害吗？</font><br><font color="red" size="7">怎么利用这个漏洞呢？</font><p>我看了很多技术分析文章，都太过专业，很多非Java技术栈或者不搞安全的人只能看个一知半解，导致大家只能看个热闹，对这个漏洞的成因、原理、利用方式、影响面理解的不到位。</p><p>这篇文章，我尝试让所有技术相关的朋友都能看懂：<strong>这个注定会载入网络安全史册上的漏洞，到底是怎么一回事！</strong></p><h1 id="log4j2"><a href="#log4j2" class="headerlink" title="log4j2"></a>log4j2</h1><p>不管是什么编程语言，不管是前端后端还是客户端，对打日志都不会陌生。</p><p>通过日志，可以帮助我们了解程序的运行情况，排查程序运行中出现的问题。</p><p>在Java技术栈中，用的比较多的日志输出框架主要是<code>log4j2</code>和<code>logback</code>。</p><p>今天讨论的主角就是<code>log4j2</code>。</p><p>我们经常会在日志中输出一些变量，比如：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">logger.info(<span class="string">"client ip: &#123;&#125;"</span>, clientIp)</span><br></pre></td></tr></table></figure><p>现在思考一个问题：</p><p>假如现在想要通过日志输出一个Java对象，但这个对象不在程序中，而是在其他地方，比如可能在某个文件中，甚至可能在网络上的某个地方，这种时候怎么办呢？</p><p>log4j2的强大之处在于，除了可以输出程序中的变量，它还提供了一个叫<code>Lookup</code>的东西，可以用来输出更多内容：</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/img/posts/log4j/640.webp" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>lookup，顾名思义就是查找、搜索的意思，那在log4j2中，就是允许在输出日志的时候，通过某种方式去查找要输出的内容。</p><p>lookup相当于是一个接口，具体去哪里查找，怎么查找，就需要编写具体的模块去实现了，类似于面向对象编程中多态那意思。</p><p>好在，log4j2已经帮我们把常见的查找途径都进行实现了：</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/img/posts/log4j/lookup_ways.webp" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>具体每一个的意思，这里就不详述了，这不是本文的重点。</p><h1 id="JNDI"><a href="#JNDI" class="headerlink" title="JNDI"></a>JNDI</h1><p>主要来看其中那个叫JNDI的东西：</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/img/posts/log4j/jndi_lookup.webp" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><blockquote><p>JNDI即Java Naming and Directory Interface（JAVA命名和目录接口），它提供一个目录系统，并将服务名称与对象关联起来，从而使得开发人员在开发过程中可以使用名称来访问对象。</p></blockquote><p>看不懂？看不懂就对了！</p><p>简单粗暴理解：有一个类似于字典的数据源，你可以通过JNDI接口，传一个name进去，就能获取到对象了。</p><p>那不同的数据源肯定有不同的查找方式，所以JNDI也只是一个上层封装，在它下面也支持很多种具体的数据源。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/img/posts/log4j/jndi_impl.webp" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><h1 id="LDAP"><a href="#LDAP" class="headerlink" title="LDAP"></a>LDAP</h1><p>继续把目光聚焦，咱们只看这个叫<strong>LDAP</strong>的东西。</p><blockquote><p>LDAP即Lightweight Directory Access Protocol（轻量级目录访问协议），目录是一个为查询、浏览和搜索而优化的专业分布式数据库，它呈树状结构组织数据，就好象Linux/Unix系统中的文件目录一样。目录数据库和关系数据库不同，它有优异的读性能，但写性能差，并且没有事务处理、回滚等复杂功能，不适于存储修改频繁的数据。所以目录天生是用来查询的，就好像它的名字一样。</p></blockquote><p>看不懂？看不懂就对了！</p><p>这个东西用在统一身份认证领域比较多，但今天也不是这篇文章的重点。你只需要简单粗暴理解：有一个类似于字典的数据源，你可以通过LDAP协议，传一个name进去，就能获取到数据。</p><h1 id="漏洞原理"><a href="#漏洞原理" class="headerlink" title="漏洞原理"></a>漏洞原理</h1><p>好了，有了以上的基础，再来理解这个漏洞就很容易了。</p><p>假如某一个Java程序中，将浏览器的类型记录到了日志中：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">String userAgent = request.getHeader(<span class="string">"User-Agent"</span>);</span><br><span class="line">logger.info(userAgent);</span><br></pre></td></tr></table></figure><p>网络安全中有一个准则：<strong>不要信任用户输入的任何信息</strong>。</p><p>这其中，<code>User-Agent</code>就属于外界输入的信息，而不是自己程序里定义出来的。只要是外界输入的，就有可能存在恶意的内容。</p><p>假如有人发来了一个HTTP请求，他的User-Agent是这样一个字符串：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$&#123;jndi:ldap://127.0.0.1/exploit&#125;</span><br></pre></td></tr></table></figure><p>接下来，log4j2将会对这行要输出的字符串进行解析。</p><p>首先，它发现了字符串中有 <code>${}</code>，知道这个里面包裹的内容是要单独处理的。</p><p>进一步解析，发现是JNDI扩展内容。</p><p>再进一步解析，发现了是LDAP协议，LDAP服务器在127.0.0.1，要查找的key是exploit。</p><p>最后，调用具体负责LDAP的模块去请求对应的数据。</p><p>如果只是请求普通的数据，那也没什么，但问题就出在还可以请求Java对象！</p><p>Java对象一般只存在于内存中，但也可以通过序列化的方式将其存储到文件中，或者通过网络传输。</p><p>如果是自己定义的序列化方式也还好，但更危险的在于：JNDI还支持一个叫命名引用（Naming References）的方式，可以通过远程下载一个class文件，然后下载后加载起来构建对象。</p><blockquote><p>PS：有时候Java对象比较大，直接通过LDAP这些存储不方便，就整了个类似于二次跳转的意思，不直接返回对象内容，而是告诉你对象在哪个class里，让你去那里找。</p></blockquote><p>注意，这里就是核心问题了：<strong>JNDI可以远程下载class文件来构建对象！！！</strong></p><p>危险在哪里？</p><p>如果远程下载的URL指向的是一个黑客的服务器，并且下载的class文件里面藏有恶意代码，那不就完犊子了吗？</p><p>还没看懂？没关系，我画了一张图：</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/img/posts/log4j/bug_step.webp" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>这就是鼎鼎大名的JNDI注入攻击！</p><p>其实除了LDAP，还有RMI的方式，有兴趣的可以了解下。</p><h1 id="JNDI-注入"><a href="#JNDI-注入" class="headerlink" title="JNDI 注入"></a>JNDI 注入</h1><p>其实这种攻击手法不是这一次出现了，早在2016的blackhat大会上，就有大佬披露了这种攻击方式。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/img/posts/log4j/usa2016.webp" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>回过头来看，问题的核心在于：</p><p>Java允许通过JNDI远程去下载一个class文件来加载对象，如果这个远程地址是自己的服务器，那还好说，如果是可以被外界来指定的地址，那就要出大问题！</p><p>前面的例子中，一直用的127.0.0.1来代替LDAP服务器地址，那如果输入的User-Agent字符串中不是这个地址，而是一个恶意服务器地址呢？</p><h1 id="影响规模"><a href="#影响规模" class="headerlink" title="影响规模"></a>影响规模</h1><p>这一次漏洞的影响面之所以如此之大，主要还是log4j2的使用面实在是太广了。</p><p>一方面现在Java技术栈在Web、后端开发、大数据等领域应用非常广泛，国内除了阿里巴巴、京东、美团等一大片以Java为主要技术栈的公司外，还有多如牛毛的中小企业选择Java。</p><p>另一方面，还有好多像kafka、elasticsearch、flink这样的大量中间件都是用Java语言开发的。</p><p>在上面这些开发过程中，大量使用了log4j2作为日志输出。只要一个不留神，输出的日志有外部输入混进来，那直接就是远程代码执行RCE，灭顶之灾！</p><h1 id="修复"><a href="#修复" class="headerlink" title="修复"></a>修复</h1><p>新版的log4j2已经修复了这个问题，大家赶紧升级。</p><p>下面是log4j2官网中关于JNDI lookup的说明：</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="/img/posts/log4j/log4j2_jndi1.webp" alt="" title="">                </div>                <div class="image-caption"></div>            </figure><p>我通过搜索引擎找到了缓存的12月10号前的快照，大家对比一下，比起下面这个缓存，上面那一版多了哪些东西？</p><p><img src="/img/posts/log4j/log4j2_jndi2.webp" alt=""></p><p>答案是：修复后的log4j2在JNDI lookup中增加了很多的限制：</p><blockquote><ol><li>默认不再支持二次跳转（也就是命名引用）的方式获取对象</li><li>只有在log4j2.allowedLdapClasses列表中指定的class才能获取。</li><li>只有远程地址是本地地址或者在log4j2.allowedLdapHosts列表中指定的地址才能获取</li></ol></blockquote><p>以上几道限制，算是彻底封锁了通过打印日志去远程加载class的这条路了。</p><h1 id="影响的组件"><a href="#影响的组件" class="headerlink" title="影响的组件"></a>影响的组件</h1><p>可能的受影响应用及组件（包括但不限于）如下：</p><ul><li>Apache Solr</li><li>Apache Flink</li><li>Apache Druid</li><li>Apache Struts2</li><li>srping-boot-strater-log4j2</li><li>Elasticsearch</li><li>flume</li><li>dubbo</li><li>Redis</li><li>logstash</li><li>kafka</li></ul><p><strong>幸运的是大家目前普遍使用的<code>springboot</code>中默认使用日志组件<code>logback</code>没有这个问题。</strong></p><p>更多组件可参考如下链接：<a href="https://mvnrepository.com/artifact/org.apache.logging.log4j/log4j-core/usages?p=1" target="_blank" rel="noopener">https://mvnrepository.com/artifact/org.apache.logging.log4j/log4j-core/usages?p=1</a></p><h1 id="攻击检测"><a href="#攻击检测" class="headerlink" title="攻击检测"></a>攻击检测</h1><ol><li>可以通过检查日志中是否存在 “jndi:ldap://”、“jndi:rmi” 等字符来发现可能的攻击行为。攻击者在利用前通常采用dnslog方式进行扫描、探测，对于常见利用方式可通过应用系统报错日志中的”javax.naming.CommunicationException”、”javax.naming.NamingException: problem generating object using object factory”、”Error looking up JNDI resource”关键字进行排查。</li><li>攻击者的数据包中可能存在：”${jndi:}” 字样，攻击代码举例如下：<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">logger.error(<span class="string">"$&#123;jndi:ldap://127.0.0.1:1389/test&#125;"</span>);</span><br></pre></td></tr></table></figure></li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;相信大家这两天应该被这么一条新闻刷屏了吧：&lt;/p&gt;
&lt;figure class=&quot;image-bubble&quot;&gt;
                &lt;div class=&quot;img-lightbox&quot;&gt;
                    &lt;div class=&quot;overla
      
    
    </summary>
    
    
      <category term="java" scheme="https://blog.smilexin.cn/tags/java/"/>
    
      <category term="漏洞" scheme="https://blog.smilexin.cn/tags/%E6%BC%8F%E6%B4%9E/"/>
    
      <category term="Log4j" scheme="https://blog.smilexin.cn/tags/Log4j/"/>
    
  </entry>
  
  <entry>
    <title>肌酸服用记录</title>
    <link href="https://blog.smilexin.cn/2021/11/15/%E8%82%8C%E9%85%B8%E6%9C%8D%E7%94%A8%E8%AE%B0%E5%BD%95.html"/>
    <id>https://blog.smilexin.cn/2021/11/15/肌酸服用记录.html</id>
    <published>2021-11-14T16:00:00.000Z</published>
    <updated>2022-01-25T06:38:31.564Z</updated>
    
    <content type="html"><![CDATA[<h1 id="2021-11-08-星期一"><a href="#2021-11-08-星期一" class="headerlink" title="2021-11-08 星期一"></a>2021-11-08 星期一</h1><p>练前肌酸3g，练后肌酸3g</p><h1 id="2021-11-09-星期二"><a href="#2021-11-09-星期二" class="headerlink" title="2021-11-09 星期二"></a>2021-11-09 星期二</h1><p>早上肌酸3g，练前肌酸3g，练后肌酸3g</p><h1 id="2021-11-10-星期三"><a href="#2021-11-10-星期三" class="headerlink" title="2021-11-10 星期三"></a>2021-11-10 星期三</h1><p>早上肌酸3g，练前肌酸3g，练后肌酸3g</p><h1 id="2021-11-11-星期四"><a href="#2021-11-11-星期四" class="headerlink" title="2021-11-11 星期四"></a>2021-11-11 星期四</h1><p>早上肌酸3g，练后肌酸3g</p><h1 id="2021-11-12-星期五"><a href="#2021-11-12-星期五" class="headerlink" title="2021-11-12 星期五"></a>2021-11-12 星期五</h1><p>早上肌酸3g，练前肌酸3g，晚3g</p><h1 id="2021-11-13-星期六（冲击期）"><a href="#2021-11-13-星期六（冲击期）" class="headerlink" title="2021-11-13 星期六（冲击期）"></a>2021-11-13 星期六（冲击期）</h1><p>练前肌酸3g 练后3g</p><h1 id="2021-11-15-星期一-（维持期）"><a href="#2021-11-15-星期一-（维持期）" class="headerlink" title="2021-11-15 星期一 （维持期）"></a>2021-11-15 星期一 （维持期）</h1><p>练前肌酸3g</p><h1 id="2021-11-16-星期二-（维持期）"><a href="#2021-11-16-星期二-（维持期）" class="headerlink" title="2021-11-16 星期二 （维持期）"></a>2021-11-16 星期二 （维持期）</h1><p>练前肌酸3g</p><h1 id="2021-11-17-星期三-（维持期）"><a href="#2021-11-17-星期三-（维持期）" class="headerlink" title="2021-11-17 星期三 （维持期）"></a>2021-11-17 星期三 （维持期）</h1><p>练前肌酸3g</p><h1 id="2021-11-18-星期四-（维持期）"><a href="#2021-11-18-星期四-（维持期）" class="headerlink" title="2021-11-18 星期四 （维持期）"></a>2021-11-18 星期四 （维持期）</h1><p>练前肌酸3g</p><h1 id="2021-11-18-星期五-（维持期）"><a href="#2021-11-18-星期五-（维持期）" class="headerlink" title="2021-11-18 星期五 （维持期）"></a>2021-11-18 星期五 （维持期）</h1><p>练前肌酸3g</p><h1 id="2021-11-18-星期六-（维持期）"><a href="#2021-11-18-星期六-（维持期）" class="headerlink" title="2021-11-18 星期六 （维持期）"></a>2021-11-18 星期六 （维持期）</h1><p>肌酸3g</p><h1 id="2021-11-18-星期天-（维持期）"><a href="#2021-11-18-星期天-（维持期）" class="headerlink" title="2021-11-18 星期天 （维持期）"></a>2021-11-18 星期天 （维持期）</h1><p>肌酸3g</p><h1 id="2021-11-22-星期一（维持期）"><a href="#2021-11-22-星期一（维持期）" class="headerlink" title="2021-11-22 星期一（维持期）"></a>2021-11-22 星期一（维持期）</h1><p>练前肌酸3g</p><h1 id="2021-11-23-星期二（维持期）"><a href="#2021-11-23-星期二（维持期）" class="headerlink" title="2021-11-23 星期二（维持期）"></a>2021-11-23 星期二（维持期）</h1><p>练前肌酸3g</p><h1 id="2021-11-24-星期三（维持期）"><a href="#2021-11-24-星期三（维持期）" class="headerlink" title="2021-11-24 星期三（维持期）"></a>2021-11-24 星期三（维持期）</h1><p>练前肌酸3g</p><h1 id="2021-11-25-星期四（维持期）"><a href="#2021-11-25-星期四（维持期）" class="headerlink" title="2021-11-25 星期四（维持期）"></a>2021-11-25 星期四（维持期）</h1><p>练前肌酸3g</p><h1 id="2021-11-25-星期五（维持期）"><a href="#2021-11-25-星期五（维持期）" class="headerlink" title="2021-11-25 星期五（维持期）"></a>2021-11-25 星期五（维持期）</h1><p>练前肌酸3g</p><h1 id="2021-11-29-星期一（维持期）"><a href="#2021-11-29-星期一（维持期）" class="headerlink" title="2021-11-29 星期一（维持期）"></a>2021-11-29 星期一（维持期）</h1><p>练前肌酸3g</p><h1 id="2021-11-30（维持期）"><a href="#2021-11-30（维持期）" class="headerlink" title="2021-11-30（维持期）"></a>2021-11-30（维持期）</h1><p>练前肌酸3g</p><h1 id="2021-12-01（维持期）"><a href="#2021-12-01（维持期）" class="headerlink" title="2021-12-01（维持期）"></a>2021-12-01（维持期）</h1><p>练前肌酸3g</p><h1 id="2021-12-02（维持期）"><a href="#2021-12-02（维持期）" class="headerlink" title="2021-12-02（维持期）"></a>2021-12-02（维持期）</h1><p>练前肌酸3g</p><h1 id="2021-12-03（维持期）"><a href="#2021-12-03（维持期）" class="headerlink" title="2021-12-03（维持期）"></a>2021-12-03（维持期）</h1><p>练前肌酸3g</p><h1 id="2021-12-05（维持期）"><a href="#2021-12-05（维持期）" class="headerlink" title="2021-12-05（维持期）"></a>2021-12-05（维持期）</h1><p>练前肌酸3g</p><h1 id="2021-12-06（维持期）"><a href="#2021-12-06（维持期）" class="headerlink" title="2021-12-06（维持期）"></a>2021-12-06（维持期）</h1><p>练前肌酸3g</p><h1 id="2021-12-07（维持期）"><a href="#2021-12-07（维持期）" class="headerlink" title="2021-12-07（维持期）"></a>2021-12-07（维持期）</h1><p>练前肌酸3g</p><h1 id="2021-12-08（维持期）"><a href="#2021-12-08（维持期）" class="headerlink" title="2021-12-08（维持期）"></a>2021-12-08（维持期）</h1><p>练前肌酸3g</p><h1 id="2021-12-09（维持期）"><a href="#2021-12-09（维持期）" class="headerlink" title="2021-12-09（维持期）"></a>2021-12-09（维持期）</h1><p>练前肌酸3g</p><h1 id="2021-12-11（维持期）"><a href="#2021-12-11（维持期）" class="headerlink" title="2021-12-11（维持期）"></a>2021-12-11（维持期）</h1><p>练前肌酸3g</p><h1 id="2021-12-13（维持期）"><a href="#2021-12-13（维持期）" class="headerlink" title="2021-12-13（维持期）"></a>2021-12-13（维持期）</h1><p>练前肌酸3g</p><h1 id="2021-12-14（维持期）"><a href="#2021-12-14（维持期）" class="headerlink" title="2021-12-14（维持期）"></a>2021-12-14（维持期）</h1><p>练前肌酸3g</p><h1 id="2021-12-17（维持期）"><a href="#2021-12-17（维持期）" class="headerlink" title="2021-12-17（维持期）"></a>2021-12-17（维持期）</h1><p>练前肌酸3g</p><h1 id="2021-12-20（维持期）"><a href="#2021-12-20（维持期）" class="headerlink" title="2021-12-20（维持期）"></a>2021-12-20（维持期）</h1><p>练前肌酸3g</p><h1 id="2021-12-21（维持期）"><a href="#2021-12-21（维持期）" class="headerlink" title="2021-12-21（维持期）"></a>2021-12-21（维持期）</h1><p>练前肌酸3g</p><h1 id="2021-12-22（维持期）"><a href="#2021-12-22（维持期）" class="headerlink" title="2021-12-22（维持期）"></a>2021-12-22（维持期）</h1><p>练前肌酸3g</p><h1 id="2021-12-24（维持期）"><a href="#2021-12-24（维持期）" class="headerlink" title="2021-12-24（维持期）"></a>2021-12-24（维持期）</h1><p>练前肌酸3g</p><h1 id="2021-12-26（维持期）"><a href="#2021-12-26（维持期）" class="headerlink" title="2021-12-26（维持期）"></a>2021-12-26（维持期）</h1><p>练前肌酸3g</p><h1 id="2021-12-28（维持期）"><a href="#2021-12-28（维持期）" class="headerlink" title="2021-12-28（维持期）"></a>2021-12-28（维持期）</h1><p>练前肌酸3g</p><h1 id="2021-12-29（维持期）"><a href="#2021-12-29（维持期）" class="headerlink" title="2021-12-29（维持期）"></a>2021-12-29（维持期）</h1><p>练前肌酸3g</p><h1 id="2021-12-31（维持期）"><a href="#2021-12-31（维持期）" class="headerlink" title="2021-12-31（维持期）"></a>2021-12-31（维持期）</h1><p>练前肌酸3g</p><h1 id="2022-01-02（维持期）"><a href="#2022-01-02（维持期）" class="headerlink" title="2022-01-02（维持期）"></a>2022-01-02（维持期）</h1><p>练前肌酸3g</p><h1 id="2022-01-04（维持期）"><a href="#2022-01-04（维持期）" class="headerlink" title="2022-01-04（维持期）"></a>2022-01-04（维持期）</h1><p>练前肌酸3g</p><h1 id="2022-01-06（维持期）"><a href="#2022-01-06（维持期）" class="headerlink" title="2022-01-06（维持期）"></a>2022-01-06（维持期）</h1><p>练前肌酸3g</p><h1 id="2022-01-07（维持期）"><a href="#2022-01-07（维持期）" class="headerlink" title="2022-01-07（维持期）"></a>2022-01-07（维持期）</h1><p>练前肌酸3g</p><h1 id="2022-01-11（维持期）"><a href="#2022-01-11（维持期）" class="headerlink" title="2022-01-11（维持期）"></a>2022-01-11（维持期）</h1><p>练前肌酸3g</p><h1 id="2022-01-12（维持期）"><a href="#2022-01-12（维持期）" class="headerlink" title="2022-01-12（维持期）"></a>2022-01-12（维持期）</h1><p>练前肌酸3g</p><h1 id="2022-01-13（维持期）"><a href="#2022-01-13（维持期）" class="headerlink" title="2022-01-13（维持期）"></a>2022-01-13（维持期）</h1><p>练前肌酸3g</p><h1 id="2022-01-14（维持期）"><a href="#2022-01-14（维持期）" class="headerlink" title="2022-01-14（维持期）"></a>2022-01-14（维持期）</h1><p>练前肌酸3g</p><h1 id="2022-01-17（维持期）"><a href="#2022-01-17（维持期）" class="headerlink" title="2022-01-17（维持期）"></a>2022-01-17（维持期）</h1><p>练前肌酸3g</p><h1 id="2022-01-19（维持期）"><a href="#2022-01-19（维持期）" class="headerlink" title="2022-01-19（维持期）"></a>2022-01-19（维持期）</h1><p>练前肌酸3g</p><h1 id="2022-01-24（维持期）"><a href="#2022-01-24（维持期）" class="headerlink" title="2022-01-24（维持期）"></a>2022-01-24（维持期）</h1><p>练前肌酸3g</p><h1 id="2022-01-25（维持期）"><a href="#2022-01-25（维持期）" class="headerlink" title="2022-01-25（维持期）"></a>2022-01-25（维持期）</h1><p>练前肌酸3g</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;2021-11-08-星期一&quot;&gt;&lt;a href=&quot;#2021-11-08-星期一&quot; class=&quot;headerlink&quot; title=&quot;2021-11-08 星期一&quot;&gt;&lt;/a&gt;2021-11-08 星期一&lt;/h1&gt;&lt;p&gt;练前肌酸3g，练后肌酸3g&lt;/p&gt;
&lt;h1 
      
    
    </summary>
    
    
      <category term="健身" scheme="https://blog.smilexin.cn/tags/%E5%81%A5%E8%BA%AB/"/>
    
  </entry>
  
  <entry>
    <title>该不该使用握力带</title>
    <link href="https://blog.smilexin.cn/2021/11/12/%E8%AF%A5%E4%B8%8D%E8%AF%A5%E4%BD%BF%E7%94%A8%E6%8F%A1%E5%8A%9B%E5%B8%A6.html"/>
    <id>https://blog.smilexin.cn/2021/11/12/该不该使用握力带.html</id>
    <published>2021-11-11T16:00:00.000Z</published>
    <updated>2021-11-12T09:27:14.172Z</updated>
    
    <content type="html"><![CDATA[<p>如果你能轻松握住的话，那就用手握好了。大部分人大部分时候都不需要握力带。但如果你在做5/3/1一类的计划，里面含有AMRAP组(尽可能做多次数)，那就没理由不用握力带了，尤其是如果你的握力会比背部髋部先力竭的话。不用握力带的话会让你完成不了本能完成的次数，训练效果也大打折扣。如果你在做Sheiko一类的超高容量的计划的话，也可以用握力带。随着你手开始疲劳，动作质量也会下滑，而这些计划要求动作完美执行。频率也很重要。如果你的握力力竭了的话，接下来两三天可能都无法完全恢复。如果你每周拉超过两次，手开始酸时就用握力带吧没关系。</p><p>奥林匹克举重</p><p>我不懂举重，下面内容是我听一些举重教练讲的。</p><p>高翻时不要用握力带，如果杠铃一不小心从三角肌前束上滚下来的话，你可能无法松手导致手被拉伤。抓举可以用握力带，一般来说，如果你高翻能用锁握握住的话，抓举也问题不大。热身组时不要用握力带，大重量组前几组不要用，避免忘了不用握力带的感觉，但其他时候用用无妨。</p><p>辅助动作</p><p>除了高次数的划船或者罗马尼亚硬拉之外，握力带没有什么使用的必要。我几乎没见过有人能用正确动作做划船还能用到必须用握力带的重量，但正常轻重量下如果做超高次数的话，握力的确可能成问题，可以使用握力带帮助一下。罗马尼亚硬拉同理。大重量哑铃划船也值得用握力带。至于耸肩，我个人把这个动作当做握力训练(我用架上拉、宽握硬拉练斜方肌)，所以不用握力带。如果引体向上做20次以上的话，用握力带也很有用。</p><p>体能训练</p><p>我见过有傻X用握力带把自己绑在跑步机上。如果你也这么做的话，你真是病的不轻。至于农夫行走，我一般也是当做握力训练，但如果做大重量长距离的话，就有必要用握力带了。</p><p>总的来说，我还是挺喜欢握力带的。不要仅仅因为你不喜欢用手握就用握力带，但如果有需要的话，尽管用就是。说实话，我认为，如果你硬拉从不用握力带的话，你很可能在限制自己进步，高次数或架上拉都是很好的训练方式(可以看看大力士比赛选手硬拉水平)，不用握力带的话，你很难全力去练这两种方式。如果你的握力成了短板的话，花时间练握力即可。就算是最差的情况下，你也不过是个握力弱但硬拉强的人，不用握力带你可能是个握力和硬拉都很弱的人。</p><p>如果你还是坚持不该用握力带的话，也无所谓，我没说必须要用握力带。但我认为不应该建议别人不要用握力带。握力带只是个能让你更好的训练的工具，有什么不好的?</p><p><strong>简单来说，如果你感觉用握力带能带起更大的重量，更好的轰炸目标肌肉。就用握力带吧。反正我练背喜欢用握力带☺</strong></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;如果你能轻松握住的话，那就用手握好了。大部分人大部分时候都不需要握力带。但如果你在做5/3/1一类的计划，里面含有AMRAP组(尽可能做多次数)，那就没理由不用握力带了，尤其是如果你的握力会比背部髋部先力竭的话。不用握力带的话会让你完成不了本能完成的次数，训练效果也大打折扣
      
    
    </summary>
    
    
      <category term="健身" scheme="https://blog.smilexin.cn/tags/%E5%81%A5%E8%BA%AB/"/>
    
  </entry>
  
  <entry>
    <title>Nginx常用配置记录</title>
    <link href="https://blog.smilexin.cn/2021/11/10/Nginx%E5%B8%B8%E7%94%A8%E9%85%8D%E7%BD%AE%E8%AE%B0%E5%BD%95.html"/>
    <id>https://blog.smilexin.cn/2021/11/10/Nginx常用配置记录.html</id>
    <published>2021-11-09T16:00:00.000Z</published>
    <updated>2021-11-10T03:03:57.693Z</updated>
    
    <content type="html"><![CDATA[<h1 id="安装-Nginx"><a href="#安装-Nginx" class="headerlink" title="安装 Nginx"></a>安装 Nginx</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># 更新软件包，请确保服务器的软件包已经是最新的。</span><br><span class="line">sudo yum update -y</span><br><span class="line"></span><br><span class="line"># 添加 Nginx 源</span><br><span class="line">sudo rpm -Uvh http://nginx.org/packages/centos/7/noarch/RPMS/nginx-release-centos-7-0.el7.ngx.noarch.rpm</span><br><span class="line"></span><br><span class="line"># 安装 Nginx</span><br><span class="line">sudo yum install -y nginx</span><br><span class="line"></span><br><span class="line"># 启动 Nginx</span><br><span class="line">sudo systemctl start nginx.service</span><br><span class="line"></span><br><span class="line"># 设置开机自启 Nginx</span><br><span class="line">sudo systemctl enable nginx.service</span><br></pre></td></tr></table></figure><h1 id="配置-Nginx"><a href="#配置-Nginx" class="headerlink" title="配置 Nginx"></a>配置 Nginx</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"># 使用 vim 编辑创建 文件名.conf</span><br><span class="line">vim /etc/nginx/conf.d/文件名.conf</span><br><span class="line"></span><br><span class="line">添加配置1（配置1和2可以同事监听80端口，绑定不同域名，实现一台服务器nginx同时配置多个前端网站，多个域名空格隔开）</span><br><span class="line">server &#123;</span><br><span class="line">    listen 80;</span><br><span class="line">    server_name 域名1 域名2 localhost;</span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">        proxy_set_header HOST $host;</span><br><span class="line">        proxy_set_header X-Forwarded-Proto $scheme;</span><br><span class="line">        proxy_set_header X-Real-IP $remote_addr;</span><br><span class="line">        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line"></span><br><span class="line">        proxy_pass http://127.0.0.1:端口/;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">添加配置2</span><br><span class="line">server &#123;</span><br><span class="line">    listen 80;</span><br><span class="line">    server_name 域名1 域名2 localhost;</span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">        proxy_set_header HOST $host;</span><br><span class="line">        proxy_set_header X-Forwarded-Proto $scheme;</span><br><span class="line">        proxy_set_header X-Real-IP $remote_addr;</span><br><span class="line">        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line"></span><br><span class="line">        proxy_pass http://127.0.0.1:端口/;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">代理静态网站 root指定磁盘目录</span><br><span class="line">server &#123;</span><br><span class="line">    listen       80;</span><br><span class="line">    server_name  域名1 域名2 多个域名空格隔开 localhost;</span><br><span class="line">    location / &#123;</span><br><span class="line">       try_files $uri $uri/ /index.html;</span><br><span class="line">       root D:\test-web;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">检查配置是否有误</span><br><span class="line">nginx -t</span><br><span class="line"></span><br><span class="line">重载/重启 Nginx 配置</span><br><span class="line">nginx -s reload</span><br><span class="line"></span><br><span class="line">Stop 是快速关闭，不管有没有正在处理的请求</span><br><span class="line">nginx -s stop</span><br><span class="line"></span><br><span class="line">Quit 是一个优雅的关闭方式，Nginx在退出前完成已经接受的连接请求。</span><br><span class="line">nginx -s quit</span><br><span class="line"></span><br><span class="line">查看nginx</span><br><span class="line">ps -ef | grep nginx</span><br></pre></td></tr></table></figure><h1 id="错误及解决办法"><a href="#错误及解决办法" class="headerlink" title="错误及解决办法"></a>错误及解决办法</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">不能访问子路径错误：</span><br><span class="line">location /flow &#123;</span><br><span class="line">    proxy_pass http://127.0.0.1:9083/;</span><br><span class="line">&#125;</span><br><span class="line">修改：</span><br><span class="line">location /flow/ &#123;</span><br><span class="line">    proxy_pass http://127.0.0.1:9083/;</span><br><span class="line">&#125;</span><br><span class="line">解决：/flow 后面加个/</span><br><span class="line"></span><br><span class="line">配置多个前端代码/a/ /b/不能访问</span><br><span class="line">解决：把/a/ /b/放在根目录下面 （就是只有一个根目录，不过根目录里面可以放很多项目文件夹）</span><br><span class="line"></span><br><span class="line">去掉请求后面的斜杠 添加在location节点里面 解决浏览器请求拼接到接口前面的诡异问题</span><br><span class="line">rewrite ^/(.*)/$ /$1 permanent;</span><br></pre></td></tr></table></figure><h1 id="前后端分离项目部署"><a href="#前后端分离项目部署" class="headerlink" title="前后端分离项目部署"></a>前后端分离项目部署</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">##前端配置</span><br><span class="line">location /gov_flow &#123;</span><br><span class="line">##放再nginx下的/content/gov_flow目录</span><br><span class="line">alias /var/html/gov_flow;</span><br><span class="line">try_files $uri $uri/ /index.html;</span><br><span class="line">index index.html;</span><br><span class="line">&#125;</span><br><span class="line">        </span><br><span class="line">##后端接口配置            </span><br><span class="line">location /stage-prod-api/ &#123;</span><br><span class="line">proxy_set_header Host $http_host;</span><br><span class="line">proxy_set_header X-Real-IP $remote_addr;</span><br><span class="line">proxy_set_header REMOTE-HOST $remote_addr;</span><br><span class="line">proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line">proxy_pass http://flow:9083/;</span><br><span class="line">&#125;</span><br><span class="line">location /stage-test-api/&#123;</span><br><span class="line">proxy_set_header Host $http_host;</span><br><span class="line">proxy_set_header X-Real-IP $remote_addr;</span><br><span class="line">proxy_set_header REMOTE-HOST $remote_addr;</span><br><span class="line">proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line">proxy_pass http://localhost:8080/;</span><br><span class="line">&#125;</span><br><span class="line">    </span><br><span class="line">#两个后端项目接口合并成一个 给前端访问9991</span><br><span class="line">server &#123;</span><br><span class="line">    listen       9991;</span><br><span class="line">    server_name  localhost;</span><br><span class="line">    location /yqt/&#123;</span><br><span class="line">        proxy_pass http://127.0.0.1:8888/yqt/;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    location /ad/&#123;</span><br><span class="line">        proxy_pass http://127.0.0.1:8090/ad/;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="nginx配置ssl证书示例1"><a href="#nginx配置ssl证书示例1" class="headerlink" title="nginx配置ssl证书示例1"></a>nginx配置ssl证书示例1</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">http&#123;</span><br><span class="line">#http节点中可以添加多个server节点</span><br><span class="line">server&#123;</span><br><span class="line">    #ssl 需要监听443端口</span><br><span class="line">    listen 443;</span><br><span class="line">    # CA证书对应的域名</span><br><span class="line">    server_name www.ilovey.live;</span><br><span class="line">    # 开启ssl</span><br><span class="line">    ssl on;</span><br><span class="line">    # 服务器证书绝对路径</span><br><span class="line">    ssl_certificate /www/server/nginx/conf.d/4467149_www.ilovey.live.pem;</span><br><span class="line">    # 服务器端证书key绝对路径 </span><br><span class="line">    ssl_certificate_key /www/server/nginx/conf.d/4467149_www.ilovey.live.key;</span><br><span class="line">    # session超时</span><br><span class="line">    ssl_session_timeout 5m;</span><br><span class="line">    # 协议类型</span><br><span class="line">    ssl_protocols TLSv1 TLSv1.1 TLSv1.2;</span><br><span class="line">    # ssl算法列表 </span><br><span class="line">    ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:HIGH:!aNULL:!MD5:!RC4:!DHE;</span><br><span class="line">    #  是否 服务器决定使用哪种算法  on/off   TLSv1.1 的话需要开启</span><br><span class="line">    ssl_prefer_server_ciphers on;</span><br><span class="line">    </span><br><span class="line">    location ^~  /zhihao/ &#123;</span><br><span class="line">        proxy_set_header Host $host;</span><br><span class="line">        proxy_pass http://127.0.0.1:8080/;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"># 如果用户通过 http 访问 直接重写 跳转到 https 这个是一个很有必要的操作</span><br><span class="line">server&#123;</span><br><span class="line">    listen 80;</span><br><span class="line">    server_name www.ilovey.live;</span><br><span class="line">    rewrite ^/(.*)$ https://www.ilovey.live:443/$1 permanent;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="nginx配置ssl证书示例2"><a href="#nginx配置ssl证书示例2" class="headerlink" title="nginx配置ssl证书示例2"></a>nginx配置ssl证书示例2</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">server</span><br><span class="line">&#123;</span><br><span class="line">listen 80;</span><br><span class="line">listen 443 ssl http2;</span><br><span class="line">server_name ilovey.live;</span><br><span class="line">index index.php index.html index.htm default.php default.htm default.html;</span><br><span class="line">root /www/wwwroot/网站目录;</span><br><span class="line"></span><br><span class="line">#SSL-START SSL相关配置，请勿删除或修改下一行带注释的404规则</span><br><span class="line">#error_page 404/404.html;</span><br><span class="line">ssl_certificate    /www/server/nginx/conf.d/4467149_www.ilovey.live.pem;</span><br><span class="line">ssl_certificate_key    /www/server/nginx/conf.d/4467149_www.ilovey.live.key;</span><br><span class="line">ssl_protocols TLSv1 TLSv1.1 TLSv1.2;</span><br><span class="line">ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:HIGH:!aNULL:!MD5:!RC4:!DHE;</span><br><span class="line">ssl_prefer_server_ciphers on;</span><br><span class="line">ssl_session_cache shared:SSL:10m;</span><br><span class="line">ssl_session_timeout 10m;</span><br><span class="line">error_page 497  https://$host$request_uri;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#SSL-END</span><br><span class="line"></span><br><span class="line">#ERROR-PAGE-START  错误页配置，可以注释、删除或修改</span><br><span class="line">#error_page 404 /404.html;</span><br><span class="line">#error_page 502 /502.html;</span><br><span class="line">#ERROR-PAGE-END</span><br><span class="line"></span><br><span class="line">#PHP-INFO-START  PHP引用配置，可以注释或修改</span><br><span class="line"></span><br><span class="line">#PROXY-START</span><br><span class="line">location /</span><br><span class="line">&#123;</span><br><span class="line">    proxy_pass http://localhost:8886;</span><br><span class="line">    proxy_set_header Host $host;</span><br><span class="line">    proxy_set_header X-Real-IP $remote_addr;</span><br><span class="line">    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line">    proxy_set_header REMOTE-HOST $remote_addr;</span><br><span class="line"></span><br><span class="line">    #持久化连接相关配置</span><br><span class="line">    #proxy_connect_timeout 30s;</span><br><span class="line">    #proxy_read_timeout 86400s;</span><br><span class="line">    #proxy_send_timeout 30s;</span><br><span class="line">    #proxy_http_version 1.1;</span><br><span class="line">    #proxy_set_header Upgrade $http_upgrade;</span><br><span class="line">    #proxy_set_header Connection &quot;upgrade&quot;;</span><br><span class="line">    ##expires 12h;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#PHP-INFO-END</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#禁止访问的文件或目录</span><br><span class="line">location ~ ^/(\.user.ini|\.htaccess|\.git|\.svn|\.project|LICENSE|README.md)</span><br><span class="line">&#123;</span><br><span class="line">    return 404;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#一键申请SSL证书验证目录相关设置</span><br><span class="line">location ~ \.well-known&#123;</span><br><span class="line">    allow all;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;安装-Nginx&quot;&gt;&lt;a href=&quot;#安装-Nginx&quot; class=&quot;headerlink&quot; title=&quot;安装 Nginx&quot;&gt;&lt;/a&gt;安装 Nginx&lt;/h1&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td cl
      
    
    </summary>
    
    
      <category term="Nginx" scheme="https://blog.smilexin.cn/tags/Nginx/"/>
    
  </entry>
  
</feed>
